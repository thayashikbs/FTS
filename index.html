<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>金融時系列解析</title>
  <meta name="description" content="金融時系列解析" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="金融時系列解析" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="金融時系列解析" />
  
  
  

<meta name="author" content="林 高樹" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="定常性と自己相関関数.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> はじめに</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#時系列モデリング"><i class="fa fa-check"></i><b>1.1</b> 時系列モデリング</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#金融時系列データの特徴"><i class="fa fa-check"></i><b>1.2</b> 金融時系列データの特徴</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#金融時系列データの特徴-みずほ-8411-株価データの例"><i class="fa fa-check"></i>金融時系列データの特徴: みずほ (8411) 株価データの例</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#シミュレーションによるサンプルパス生成"><i class="fa fa-check"></i><b>1.3</b> シミュレーションによるサンプルパス生成</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#rにおける時系列オブジェクトクラスおよび関数の例"><i class="fa fa-check"></i><b>1.4</b> Rにおける時系列オブジェクト・クラスおよび関数の例</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#日付時間データに対するクラス"><i class="fa fa-check"></i><b>1.4.1</b> 日付・時間データに対するクラス</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#時系列データに対するクラス1-tsクラス"><i class="fa fa-check"></i><b>1.4.2</b> 時系列データに対するクラス(1): tsクラス</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#時系列データに対するクラス2-zooクラスとxtsクラス"><i class="fa fa-check"></i><b>1.4.3</b> 時系列データに対するクラス(2): zooクラスとxtsクラス</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#時系列データの分解"><i class="fa fa-check"></i><b>1.5</b> 時系列データの分解</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="index.html"><a href="index.html#トレンド抽出-平滑化smoothing"><i class="fa fa-check"></i><b>1.5.1</b> トレンド抽出, 平滑化(smoothing)</a></li>
<li class="chapter" data-level="1.5.2" data-path="index.html"><a href="index.html#時系列の分解"><i class="fa fa-check"></i><b>1.5.2</b> 時系列の分解</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html"><i class="fa fa-check"></i><b>2</b> 定常性と自己相関関数</a>
<ul>
<li class="chapter" data-level="2.1" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#確率過程の2次特性-平均関数と自己共分散関数"><i class="fa fa-check"></i><b>2.1</b> 確率過程の2次特性: 平均関数と自己共分散関数</a></li>
<li class="chapter" data-level="2.2" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#定常性-stationarity"><i class="fa fa-check"></i><b>2.2</b> 定常性 (stationarity)</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#強定常性"><i class="fa fa-check"></i><b>2.2.1</b> 強定常性</a></li>
<li class="chapter" data-level="2.2.2" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#弱定常性"><i class="fa fa-check"></i><b>2.2.2</b> 弱定常性</a></li>
<li class="chapter" data-level="2.2.3" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#ホワイトノイズ"><i class="fa fa-check"></i><b>2.2.3</b> ホワイトノイズ</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#標本平均と標本自己共分散関数"><i class="fa fa-check"></i><b>2.3</b> 標本平均と標本自己共分散関数</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#アンサンブル平均-vs-標本平均"><i class="fa fa-check"></i><b>2.3.1</b> アンサンブル平均 vs 標本平均</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#標本自己相関関数"><i class="fa fa-check"></i><b>2.4</b> 標本自己相関関数</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#白色ノイズ"><i class="fa fa-check"></i><b>2.4.1</b> 白色ノイズ</a></li>
<li class="chapter" data-level="2.4.2" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#ランダムウォーク"><i class="fa fa-check"></i><b>2.4.2</b> ランダムウォーク</a></li>
<li class="chapter" data-level="2.4.3" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#非定常成分を含む時系列"><i class="fa fa-check"></i><b>2.4.3</b> 非定常成分を含む時系列</a></li>
<li class="chapter" data-level="2.4.4" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#線形時系列モデル"><i class="fa fa-check"></i><b>2.4.4</b> 線形時系列モデル</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#自己相関関数-標本値-vs-理論値"><i class="fa fa-check"></i><b>2.5</b> 自己相関関数 (標本値 vs 理論値)</a>
<ul>
<li class="chapter" data-level="" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#ar2-モデル"><i class="fa fa-check"></i>AR(2) モデル</a></li>
<li class="chapter" data-level="2.5.1" data-path="定常性と自己相関関数.html"><a href="定常性と自己相関関数.html#arma11モデル-1"><i class="fa fa-check"></i><b>2.5.1</b> ARMA(1,1)モデル</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="armapqモデル.html"><a href="armapqモデル.html"><i class="fa fa-check"></i><b>3</b> ARMA<span class="math inline">\((p,q)\)</span>モデル</a>
<ul>
<li class="chapter" data-level="3.1" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルとは"><i class="fa fa-check"></i><b>3.1</b> ARMA<span class="math inline">\((p,q)\)</span>モデルとは</a>
<ul>
<li class="chapter" data-level="" data-path="armapqモデル.html"><a href="armapqモデル.html#因果性と反転可能性"><i class="fa fa-check"></i>因果性と反転可能性</a></li>
<li class="chapter" data-level="" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルの意義"><i class="fa fa-check"></i>ARMA<span class="math inline">\((p,q)\)</span>モデルの意義</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルによる予測"><i class="fa fa-check"></i><b>3.2</b> ARMA<span class="math inline">\((p,q)\)</span>モデルによる予測</a></li>
<li class="chapter" data-level="3.3" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルの推定"><i class="fa fa-check"></i><b>3.3</b> ARMA<span class="math inline">\((p,q)\)</span>モデルの推定</a></li>
<li class="chapter" data-level="3.4" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルの同定-次数の特定"><i class="fa fa-check"></i><b>3.4</b> ARMA<span class="math inline">\((p,q)\)</span>モデルの同定 (次数の特定)</a></li>
<li class="chapter" data-level="3.5" data-path="armapqモデル.html"><a href="armapqモデル.html#rによる実行例"><i class="fa fa-check"></i><b>3.5</b> Rによる実行例</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルの同定-acfpacfeacfの利用"><i class="fa fa-check"></i><b>3.5.1</b> ARMA<span class="math inline">\((p,q)\)</span>モデルの同定 (ACF/PACF/EACFの利用)</a></li>
<li class="chapter" data-level="3.5.2" data-path="armapqモデル.html"><a href="armapqモデル.html#armapqモデルの推定診断"><i class="fa fa-check"></i><b>3.5.2</b> ARMA<span class="math inline">\((p,q)\)</span>モデルの推定・診断</a></li>
<li class="chapter" data-level="3.5.3" data-path="armapqモデル.html"><a href="armapqモデル.html#パッケージforecastの利用"><i class="fa fa-check"></i><b>3.5.3</b> パッケージ{forecast}の利用</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="armapqモデル.html"><a href="armapqモデル.html#armaモデル-データ分析例-tsay-ch2"><i class="fa fa-check"></i><b>3.6</b> ARMAモデル: データ分析例 (Tsay, Ch2)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="armapqモデル.html"><a href="armapqモデル.html#標本acf"><i class="fa fa-check"></i><b>3.6.1</b> 標本ACF</a></li>
<li class="chapter" data-level="3.6.2" data-path="armapqモデル.html"><a href="armapqモデル.html#ar-ma-arma-2.42.6"><i class="fa fa-check"></i><b>3.6.2</b> AR, MA, ARMA (2.4–2.6)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="arimaモデルsarimaモデル.html"><a href="arimaモデルsarimaモデル.html"><i class="fa fa-check"></i><b>4</b> ARIMAモデル/SARIMAモデル</a>
<ul>
<li class="chapter" data-level="4.1" data-path="arimaモデルsarimaモデル.html"><a href="arimaモデルsarimaモデル.html#arimapdqモデルとは"><i class="fa fa-check"></i><b>4.1</b> ARIMA<span class="math inline">\((p,d,q)\)</span>モデルとは</a></li>
<li class="chapter" data-level="4.2" data-path="arimaモデルsarimaモデル.html"><a href="arimaモデルsarimaモデル.html#sarimapdqtimes-pdq_sモデル-周期sとは"><i class="fa fa-check"></i><b>4.2</b> SARIMA<span class="math inline">\((p,d,q)\times (P,D,Q)_s\)</span>モデル (周期<span class="math inline">\(s\)</span>)とは</a></li>
<li class="chapter" data-level="4.3" data-path="arimaモデルsarimaモデル.html"><a href="arimaモデルsarimaモデル.html#sarimaモデルのパス発生-sarimaパッケージの利用"><i class="fa fa-check"></i><b>4.3</b> SARIMAモデルのパス発生 ({sarima}パッケージの利用)</a></li>
<li class="chapter" data-level="4.4" data-path="arimaモデルsarimaモデル.html"><a href="arimaモデルsarimaモデル.html#sarimaモデルの推定診断"><i class="fa fa-check"></i><b>4.4</b> SARIMAモデルの推定・診断</a></li>
<li class="chapter" data-level="4.5" data-path="arimaモデルsarimaモデル.html"><a href="arimaモデルsarimaモデル.html#パッケージforecastの利用-1"><i class="fa fa-check"></i><b>4.5</b> パッケージ{forecast}の利用</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html"><i class="fa fa-check"></i><b>5</b> 単位根過程と単位根検定</a>
<ul>
<li class="chapter" data-level="5.1" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#単位根過程と見せかけの回帰"><i class="fa fa-check"></i><b>5.1</b> 単位根過程と見せかけの回帰</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#単位根過程"><i class="fa fa-check"></i><b>5.1.1</b> 単位根過程</a></li>
<li class="chapter" data-level="5.1.2" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#見せかけの回帰"><i class="fa fa-check"></i><b>5.1.2</b> 見せかけの回帰</a></li>
<li class="chapter" data-level="5.1.3" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#見せかけの回帰の判定"><i class="fa fa-check"></i><b>5.1.3</b> 見せかけの回帰の判定</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#主な単位根検定法"><i class="fa fa-check"></i><b>5.2</b> 主な単位根検定法</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#augmented-dicky-fuller-adf-検定の実行例"><i class="fa fa-check"></i><b>5.2.1</b> Augmented Dicky-Fuller (ADF) 検定の実行例</a></li>
<li class="chapter" data-level="5.2.2" data-path="単位根過程と単位根検定.html"><a href="単位根過程と単位根検定.html#adf検定以外の検定法"><i class="fa fa-check"></i><b>5.2.2</b> ADF検定以外の検定法</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="長期記憶過程.html"><a href="長期記憶過程.html"><i class="fa fa-check"></i><b>6</b> 長期記憶過程</a>
<ul>
<li class="chapter" data-level="6.1" data-path="長期記憶過程.html"><a href="長期記憶過程.html#arfimapdq過程のシミュレーション"><i class="fa fa-check"></i><b>6.1</b> ARFIMA(p,d,q)過程のシミュレーション</a></li>
<li class="chapter" data-level="6.2" data-path="長期記憶過程.html"><a href="長期記憶過程.html#arfima-fractional-gaussian過程のシミュレーション"><i class="fa fa-check"></i><b>6.2</b> ARFIMA, fractional Gaussian過程のシミュレーション</a></li>
<li class="chapter" data-level="6.3" data-path="長期記憶過程.html"><a href="長期記憶過程.html#hurst指数の推定"><i class="fa fa-check"></i><b>6.3</b> Hurst指数の推定</a></li>
<li class="chapter" data-level="6.4" data-path="長期記憶過程.html"><a href="長期記憶過程.html#arfimaモデルの推定"><i class="fa fa-check"></i><b>6.4</b> ARFIMAモデルの推定</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="長期記憶過程.html"><a href="長期記憶過程.html#最尤法"><i class="fa fa-check"></i><b>6.4.1</b> 最尤法</a></li>
<li class="chapter" data-level="6.4.2" data-path="長期記憶過程.html"><a href="長期記憶過程.html#階差次数dの代替的推定法"><i class="fa fa-check"></i><b>6.4.2</b> 階差次数<span class="math inline">\(d\)</span>の代替的推定法</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="長期記憶過程.html"><a href="長期記憶過程.html#arfimaモデル-データ分析例-tsay-2.11-pp.119120"><i class="fa fa-check"></i><b>6.5</b> ARFIMAモデル: データ分析例 (Tsay, 2.11, pp.119–120)</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="レジームスイッチングモデル.html"><a href="レジームスイッチングモデル.html"><i class="fa fa-check"></i><b>7</b> レジーム・スイッチング・モデル</a>
<ul>
<li class="chapter" data-level="7.1" data-path="レジームスイッチングモデル.html"><a href="レジームスイッチングモデル.html#自己相関マルコフスイッチングモデル-msm-ar"><i class="fa fa-check"></i><b>7.1</b> 自己相関マルコフ・スイッチング・モデル (MSM-AR)</a></li>
<li class="chapter" data-level="7.2" data-path="レジームスイッチングモデル.html"><a href="レジームスイッチングモデル.html#msm-arモデルの適合"><i class="fa fa-check"></i><b>7.2</b> MSM-ARモデルの適合</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="garchモデル.html"><a href="garchモデル.html"><i class="fa fa-check"></i><b>8</b> GARCHモデル</a>
<ul>
<li class="chapter" data-level="8.1" data-path="garchモデル.html"><a href="garchモデル.html#garchモデル-1"><i class="fa fa-check"></i><b>8.1</b> GARCHモデル</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="garchモデル.html"><a href="garchモデル.html#garchpqモデルのサンプルパス生成"><i class="fa fa-check"></i><b>8.1.1</b> GARCH(p,q)モデルのサンプルパス生成</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="garchモデル.html"><a href="garchモデル.html#garchモデルの推定"><i class="fa fa-check"></i><b>8.2</b> GARCHモデルの推定</a></li>
<li class="chapter" data-level="8.3" data-path="garchモデル.html"><a href="garchモデル.html#garchモデルのバリエーション"><i class="fa fa-check"></i><b>8.3</b> GARCHモデルのバリエーション</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="garchモデル.html"><a href="garchモデル.html#iarch11"><i class="fa fa-check"></i><b>8.3.1</b> IARCH(1,1)</a></li>
<li class="chapter" data-level="8.3.2" data-path="garchモデル.html"><a href="garchモデル.html#gjr-garch11"><i class="fa fa-check"></i><b>8.3.2</b> GJR-GARCH(1,1)</a></li>
<li class="chapter" data-level="8.3.3" data-path="garchモデル.html"><a href="garchモデル.html#aparch"><i class="fa fa-check"></i><b>8.3.3</b> APARCH</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="garchモデル.html"><a href="garchモデル.html#garchモデル-データ分析例-tsay-ch4"><i class="fa fa-check"></i><b>8.4</b> GARCHモデル: データ分析例 (Tsay, Ch4)</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="garchモデル.html"><a href="garchモデル.html#必要な関数やデータセットの入手"><i class="fa fa-check"></i><b>8.4.1</b> 必要な関数やデータセットの入手</a></li>
<li class="chapter" data-level="8.4.2" data-path="garchモデル.html"><a href="garchモデル.html#integrated-garch-モデル"><i class="fa fa-check"></i><b>8.4.2</b> Integrated GARCH モデル</a></li>
<li class="chapter" data-level="8.4.3" data-path="garchモデル.html"><a href="garchモデル.html#garch-m-モデル"><i class="fa fa-check"></i><b>8.4.3</b> GARCH-M モデル</a></li>
<li class="chapter" data-level="8.4.4" data-path="garchモデル.html"><a href="garchモデル.html#exponential-garch-model"><i class="fa fa-check"></i><b>8.4.4</b> Exponential GARCH Model</a></li>
<li class="chapter" data-level="8.4.5" data-path="garchモデル.html"><a href="garchモデル.html#threshold-garch-モデル"><i class="fa fa-check"></i><b>8.4.5</b> Threshold GARCH モデル</a></li>
<li class="chapter" data-level="8.4.6" data-path="garchモデル.html"><a href="garchモデル.html#asymmetric-power-arch-モデル"><i class="fa fa-check"></i><b>8.4.6</b> Asymmetric Power ARCH モデル</a></li>
<li class="chapter" data-level="8.4.7" data-path="garchモデル.html"><a href="garchモデル.html#nonsymmetric-garch-モデル"><i class="fa fa-check"></i><b>8.4.7</b> Nonsymmetric GARCH モデル</a></li>
<li class="chapter" data-level="8.4.8" data-path="garchモデル.html"><a href="garchモデル.html#代替的アプリーチ間の比較"><i class="fa fa-check"></i><b>8.4.8</b> 代替的アプリーチ間の比較</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="varモデル.html"><a href="varモデル.html"><i class="fa fa-check"></i><b>9</b> VARモデル</a>
<ul>
<li class="chapter" data-level="9.1" data-path="varモデル.html"><a href="varモデル.html#varモデル-1"><i class="fa fa-check"></i><b>9.1</b> VARモデル</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="varモデル.html"><a href="varモデル.html#varpモデルのシミュレーション"><i class="fa fa-check"></i><b>9.1.1</b> VAR(<span class="math inline">\(p\)</span>)モデルのシミュレーション</a></li>
<li class="chapter" data-level="9.1.2" data-path="varモデル.html"><a href="varモデル.html#varpモデルの次数同定"><i class="fa fa-check"></i><b>9.1.2</b> VAR(<span class="math inline">\(p\)</span>)モデルの次数同定</a></li>
<li class="chapter" data-level="9.1.3" data-path="varモデル.html"><a href="varモデル.html#varpモデルの推定"><i class="fa fa-check"></i><b>9.1.3</b> VAR(<span class="math inline">\(p\)</span>)モデルの推定</a></li>
<li class="chapter" data-level="9.1.4" data-path="varモデル.html"><a href="varモデル.html#varpモデル予測"><i class="fa fa-check"></i><b>9.1.4</b> VAR(<span class="math inline">\(p\)</span>)モデル予測</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="varモデル.html"><a href="varモデル.html#var解析"><i class="fa fa-check"></i><b>9.2</b> VAR解析</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="varモデル.html"><a href="varモデル.html#varpモデルの推定復習"><i class="fa fa-check"></i><b>9.2.1</b> VAR(<span class="math inline">\(p\)</span>)モデルの推定(復習)</a></li>
<li class="chapter" data-level="9.2.2" data-path="varモデル.html"><a href="varモデル.html#グレンジャーの因果性検定"><i class="fa fa-check"></i><b>9.2.2</b> グレンジャーの因果性検定</a></li>
<li class="chapter" data-level="9.2.3" data-path="varモデル.html"><a href="varモデル.html#インパルス応答"><i class="fa fa-check"></i><b>9.2.3</b> インパルス応答</a></li>
<li class="chapter" data-level="9.2.4" data-path="varモデル.html"><a href="varモデル.html#予測誤差分散分解-forecast-error-variance-decomposition"><i class="fa fa-check"></i><b>9.2.4</b> 予測誤差分散分解 (forecast error variance decomposition)</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="varモデル.html"><a href="varモデル.html#var解析-データ分析例"><i class="fa fa-check"></i><b>9.3</b> VAR解析 (データ分析例)</a>
<ul>
<li class="chapter" data-level="" data-path="varモデル.html"><a href="varモデル.html#事例1-ソフトバンク9434-vs-ソフトバンクグループ9984"><i class="fa fa-check"></i>事例1: ソフトバンク(9434) vs ソフトバンクグループ(9984)</a></li>
<li class="chapter" data-level="" data-path="varモデル.html"><a href="varモデル.html#事例2-米英日3株式市場-sp500-ftse-日経平均"><i class="fa fa-check"></i>事例2: 米英日3株式市場 (S&amp;P500, FTSE, 日経平均)</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="varモデル.html"><a href="varモデル.html#補足-分散共分散行列のコレスキー分解"><i class="fa fa-check"></i><b>9.4</b> 補足: 分散共分散行列のコレスキー分解</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html"><i class="fa fa-check"></i><b>10</b> 共和分分析・誤差修正モデル</a>
<ul>
<li class="chapter" data-level="10.1" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#見せかけの回帰-1"><i class="fa fa-check"></i><b>10.1</b> 見せかけの回帰</a>
<ul>
<li class="chapter" data-level="" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#durbin-watson検定"><i class="fa fa-check"></i>Durbin-Watson検定</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#共和分検定"><i class="fa fa-check"></i><b>10.2</b> 共和分検定</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#engle-grangerの方法"><i class="fa fa-check"></i><b>10.2.1</b> Engle-Grangerの方法</a></li>
<li class="chapter" data-level="10.2.2" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#johansenの方法"><i class="fa fa-check"></i><b>10.2.2</b> Johansenの方法</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#誤差修正モデル-データ分析例-tsay-mts-ch5"><i class="fa fa-check"></i><b>10.3</b> 誤差修正モデル: データ分析例 (Tsay, MTS, Ch5)</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#共和分検定-1"><i class="fa fa-check"></i><b>10.3.1</b> 共和分検定</a></li>
<li class="chapter" data-level="10.3.2" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#johansenの方法-johansen-procedure"><i class="fa fa-check"></i><b>10.3.2</b> Johansenの方法 (Johansen-Procedure)</a></li>
<li class="chapter" data-level="10.3.3" data-path="共和分分析誤差修正モデル.html"><a href="共和分分析誤差修正モデル.html#誤差修正モデルecmの推定"><i class="fa fa-check"></i><b>10.3.3</b> 誤差修正モデル(ECM)の推定</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html"><i class="fa fa-check"></i><b>11</b> 多変量ボラティリティ・モデル</a>
<ul>
<li class="chapter" data-level="11.1" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#多変量時系列データの条件付不均一分散性の検定"><i class="fa fa-check"></i><b>11.1</b> 多変量時系列データの条件付不均一分散性の検定</a>
<ul>
<li class="chapter" data-level="" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#分析例"><i class="fa fa-check"></i>分析例</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#指数加重移動平均法-ewma"><i class="fa fa-check"></i><b>11.2</b> 指数加重移動平均法 (EWMA)</a></li>
<li class="chapter" data-level="11.3" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#bekk1-1モデル"><i class="fa fa-check"></i><b>11.3</b> BEKK(1, 1)モデル</a></li>
<li class="chapter" data-level="11.4" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#cholesky分解を利用したボラティリティ推定"><i class="fa fa-check"></i><b>11.4</b> Cholesky分解を利用したボラティリティ推定</a></li>
<li class="chapter" data-level="11.5" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#dcc-dynamic-conditional-correlation-モデル"><i class="fa fa-check"></i><b>11.5</b> DCC (Dynamic Conditional Correlation) モデル</a>
<ul>
<li class="chapter" data-level="" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#tse-and-tsui-2002-モデル"><i class="fa fa-check"></i>Tse and Tsui (2002) モデル</a></li>
<li class="chapter" data-level="" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#engle-2002-モデル"><i class="fa fa-check"></i>Engle (2002) モデル</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#go-garchモデル"><i class="fa fa-check"></i><b>11.6</b> Go-GARCHモデル</a></li>
<li class="chapter" data-level="11.7" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#コピュラに基づくアプローチ"><i class="fa fa-check"></i><b>11.7</b> コピュラに基づくアプローチ</a>
<ul>
<li class="chapter" data-level="" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#多変量-t-copula-ボラティリティモデル"><i class="fa fa-check"></i>多変量 t-Copula ボラティリティ・モデル</a></li>
</ul></li>
<li class="chapter" data-level="11.8" data-path="多変量ボラティリティモデル.html"><a href="多変量ボラティリティモデル.html#主成分分析に基づくアプローチ-pvc"><i class="fa fa-check"></i><b>11.8</b> 主成分分析に基づくアプローチ (PVC)</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html"><i class="fa fa-check"></i><b>12</b> 高頻度データ分析</a>
<ul>
<li class="chapter" data-level="12.1" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#ボラティリティ推定"><i class="fa fa-check"></i><b>12.1</b> ボラティリティ推定</a>
<ul>
<li class="chapter" data-level="" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#データセット1-topix指数データ"><i class="fa fa-check"></i>データセット1: TOPIX指数データ</a></li>
<li class="chapter" data-level="" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#実現ボラティリティの計算"><i class="fa fa-check"></i>実現ボラティリティの計算</a></li>
<li class="chapter" data-level="" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#parkinsonボラティリティの計算"><i class="fa fa-check"></i>Parkinsonボラティリティの計算</a></li>
<li class="chapter" data-level="" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#har-rvモデルによる予測"><i class="fa fa-check"></i>HAR-RVモデルによる予測</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#共分散相関の推定"><i class="fa fa-check"></i><b>12.2</b> 共分散・相関の推定</a>
<ul>
<li class="chapter" data-level="" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#データセット2-株価指数先物データ"><i class="fa fa-check"></i>データセット2: 株価指数先物データ</a></li>
<li class="chapter" data-level="" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#共分散相関の推定-1"><i class="fa fa-check"></i>共分散・相関の推定</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="高頻度データ分析.html"><a href="高頻度データ分析.html#acdモデル"><i class="fa fa-check"></i><b>12.3</b> ACDモデル</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="スペクトル解析.html"><a href="スペクトル解析.html"><i class="fa fa-check"></i><b>13</b> スペクトル解析</a>
<ul>
<li class="chapter" data-level="13.1" data-path="スペクトル解析.html"><a href="スペクトル解析.html#armaモデルのスペクトル密度"><i class="fa fa-check"></i><b>13.1</b> ARMAモデルのスペクトル密度</a></li>
<li class="chapter" data-level="13.2" data-path="スペクトル解析.html"><a href="スペクトル解析.html#周期変動時系列のスペクトル密度"><i class="fa fa-check"></i><b>13.2</b> 周期変動時系列のスペクトル密度</a></li>
<li class="chapter" data-level="13.3" data-path="スペクトル解析.html"><a href="スペクトル解析.html#データ分析例-1"><i class="fa fa-check"></i><b>13.3</b> データ分析例 (1)</a>
<ul>
<li class="chapter" data-level="" data-path="スペクトル解析.html"><a href="スペクトル解析.html#データセット1-sunspots"><i class="fa fa-check"></i>データセット1: sunspots</a></li>
<li class="chapter" data-level="" data-path="スペクトル解析.html"><a href="スペクトル解析.html#データセット2-soi"><i class="fa fa-check"></i>データセット2: SOI</a></li>
<li class="chapter" data-level="" data-path="スペクトル解析.html"><a href="スペクトル解析.html#データセット3-銀行プライムローン金利"><i class="fa fa-check"></i>データセット3: 銀行プライムローン金利</a></li>
<li class="chapter" data-level="" data-path="スペクトル解析.html"><a href="スペクトル解析.html#データセット4-事故死者数"><i class="fa fa-check"></i>データセット4: 事故死者数</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="スペクトル解析.html"><a href="スペクトル解析.html#データ分析例-2"><i class="fa fa-check"></i><b>13.4</b> データ分析例 (2)</a>
<ul>
<li class="chapter" data-level="" data-path="スペクトル解析.html"><a href="スペクトル解析.html#為替水準に対する分解-スペクトル解析"><i class="fa fa-check"></i>為替水準に対する分解 &amp; スペクトル解析</a></li>
<li class="chapter" data-level="" data-path="スペクトル解析.html"><a href="スペクトル解析.html#為替リターンに対する分解-スペクトル解析"><i class="fa fa-check"></i>為替リターンに対する分解 &amp; スペクトル解析</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="動的線形モデル.html"><a href="動的線形モデル.html"><i class="fa fa-check"></i><b>14</b> 動的線形モデル</a>
<ul>
<li class="chapter" data-level="14.1" data-path="動的線形モデル.html"><a href="動的線形モデル.html#パッケージdlm"><i class="fa fa-check"></i><b>14.1</b> パッケージ<strong>dlm</strong></a>
<ul>
<li class="chapter" data-level="" data-path="動的線形モデル.html"><a href="動的線形モデル.html#local-levelモデル"><i class="fa fa-check"></i>local levelモデル</a></li>
<li class="chapter" data-level="" data-path="動的線形モデル.html"><a href="動的線形モデル.html#local-level-plus-seasonal-componentモデル"><i class="fa fa-check"></i>local level plus seasonal componentモデル</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="動的線形モデル.html"><a href="動的線形モデル.html#パッケージstatespacer"><i class="fa fa-check"></i><b>14.2</b> パッケージ<strong>statespacer</strong></a>
<ul>
<li class="chapter" data-level="" data-path="動的線形モデル.html"><a href="動的線形モデル.html#local-levelモデル-1"><i class="fa fa-check"></i>local levelモデル</a></li>
<li class="chapter" data-level="" data-path="動的線形モデル.html"><a href="動的線形モデル.html#季節性への対応説明変数の追加従属変数が複数ある場合への対応"><i class="fa fa-check"></i>季節性への対応・説明変数の追加・従属変数が複数ある場合への対応</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="動的線形モデル.html"><a href="動的線形モデル.html#パッケージbssm"><i class="fa fa-check"></i><b>14.3</b> パッケージ<strong>bssm</strong></a>
<ul>
<li class="chapter" data-level="" data-path="動的線形モデル.html"><a href="動的線形モデル.html#local-levelモデル-2"><i class="fa fa-check"></i>local levelモデル</a></li>
<li class="chapter" data-level="" data-path="動的線形モデル.html"><a href="動的線形モデル.html#確率的季節性成分を持つドリフト有りランダムウォークモデル"><i class="fa fa-check"></i>確率的季節性成分を持つドリフト有りランダムウォーク・モデル</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix 参考文献</b></span></li>
<li class="chapter" data-level="A" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html"><i class="fa fa-check"></i><b>A</b> バブル (生成・崩壊) 検出</a>
<ul>
<li class="chapter" data-level="A.1" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#検定法に関する最近のレビュー論文"><i class="fa fa-check"></i><b>A.1</b> 検定法に関する最近のレビュー論文</a></li>
<li class="chapter" data-level="A.2" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#supreme-adf検定sadf-pwy-2011-generalized-supreme-adf-検定gsadf-psy-2015"><i class="fa fa-check"></i><b>A.2</b> Supreme ADF検定/SADF (PWY, 2011), Generalized supreme ADF 検定/GSADF (PSY, 2015)</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#数理ファイナンス-jarrow-protterら"><i class="fa fa-check"></i><b>A.2.1</b> 数理ファイナンス (Jarrow, Protterら)</a></li>
<li class="chapter" data-level="A.2.2" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#経済物理学-sornetteら"><i class="fa fa-check"></i><b>A.2.2</b> 経済物理学 (Sornetteら)</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#実証分析"><i class="fa fa-check"></i><b>A.3</b> 実証分析</a>
<ul>
<li class="chapter" data-level="" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#株式市場の例"><i class="fa fa-check"></i>株式市場の例</a></li>
<li class="chapter" data-level="" data-path="バブル-生成崩壊-検出.html"><a href="バブル-生成崩壊-検出.html#暗号資産市場の例"><i class="fa fa-check"></i>暗号資産市場の例</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html"><i class="fa fa-check"></i><b>B</b> 長期記憶過程</a>
<ul>
<li class="chapter" data-level="B.1" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#理論概説"><i class="fa fa-check"></i><b>B.1</b> 理論・概説</a></li>
<li class="chapter" data-level="B.2" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#株式市場"><i class="fa fa-check"></i><b>B.2</b> 株式市場</a></li>
<li class="chapter" data-level="B.3" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#外国為替市場"><i class="fa fa-check"></i><b>B.3</b> 外国為替市場</a></li>
<li class="chapter" data-level="B.4" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#コモディティ暗号資産"><i class="fa fa-check"></i><b>B.4</b> コモディティ・暗号資産</a></li>
<li class="chapter" data-level="B.5" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#vix"><i class="fa fa-check"></i><b>B.5</b> VIX</a></li>
<li class="chapter" data-level="B.6" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#高頻度データ-ボラティリティ-注文フロー等"><i class="fa fa-check"></i><b>B.6</b> 高頻度データ (ボラティリティ, 注文フロー等)</a></li>
<li class="chapter" data-level="B.7" data-path="長期記憶過程-1.html"><a href="長期記憶過程-1.html#長期記憶性の発生要因-非長期記憶モデルによる近似"><i class="fa fa-check"></i><b>B.7</b> 長期記憶性の発生要因, 非長期記憶モデルによる近似</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="markov-switching-regime-switchingモデル.html"><a href="markov-switching-regime-switchingモデル.html"><i class="fa fa-check"></i><b>C</b> Markov switching/ regime switchingモデル</a>
<ul>
<li class="chapter" data-level="C.1" data-path="markov-switching-regime-switchingモデル.html"><a href="markov-switching-regime-switchingモデル.html#理論概説-1"><i class="fa fa-check"></i><b>C.1</b> 理論・概説</a></li>
<li class="chapter" data-level="C.2" data-path="markov-switching-regime-switchingモデル.html"><a href="markov-switching-regime-switchingモデル.html#株式市場-1"><i class="fa fa-check"></i><b>C.2</b> 株式市場</a></li>
<li class="chapter" data-level="C.3" data-path="markov-switching-regime-switchingモデル.html"><a href="markov-switching-regime-switchingモデル.html#金利債券市場"><i class="fa fa-check"></i><b>C.3</b> 金利・債券市場</a></li>
<li class="chapter" data-level="C.4" data-path="markov-switching-regime-switchingモデル.html"><a href="markov-switching-regime-switchingモデル.html#外国為替市場-1"><i class="fa fa-check"></i><b>C.4</b> 外国為替市場</a></li>
<li class="chapter" data-level="C.5" data-path="markov-switching-regime-switchingモデル.html"><a href="markov-switching-regime-switchingモデル.html#アセットアロケーション"><i class="fa fa-check"></i><b>C.5</b> アセット・アロケーション</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="archgarchモデル.html"><a href="archgarchモデル.html"><i class="fa fa-check"></i><b>D</b> ARCH/GARCHモデル</a>
<ul>
<li class="chapter" data-level="D.1" data-path="archgarchモデル.html"><a href="archgarchモデル.html#概説"><i class="fa fa-check"></i><b>D.1</b> 概説</a></li>
<li class="chapter" data-level="D.2" data-path="archgarchモデル.html"><a href="archgarchモデル.html#arch-model"><i class="fa fa-check"></i><b>D.2</b> ARCH model</a></li>
<li class="chapter" data-level="D.3" data-path="archgarchモデル.html"><a href="archgarchモデル.html#garch-model"><i class="fa fa-check"></i><b>D.3</b> GARCH model</a></li>
<li class="chapter" data-level="D.4" data-path="archgarchモデル.html"><a href="archgarchモデル.html#arch-m-model"><i class="fa fa-check"></i><b>D.4</b> ARCH-M Model</a></li>
<li class="chapter" data-level="D.5" data-path="archgarchモデル.html"><a href="archgarchモデル.html#gjr-model"><i class="fa fa-check"></i><b>D.5</b> GJR model</a></li>
<li class="chapter" data-level="D.6" data-path="archgarchモデル.html"><a href="archgarchモデル.html#aparch-model"><i class="fa fa-check"></i><b>D.6</b> APARCH model</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html"><i class="fa fa-check"></i><b>E</b> 共和分/ 誤差修正モデル</a>
<ul>
<li class="chapter" data-level="E.1" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html#株式市場とマクロ変数-国際株式市場間の分析"><i class="fa fa-check"></i><b>E.1</b> 株式市場とマクロ変数, 国際株式市場間の分析</a></li>
<li class="chapter" data-level="E.2" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html#個別株式の複数取引所株価間の分析"><i class="fa fa-check"></i><b>E.2</b> 個別株式の複数取引所株価間の分析</a></li>
<li class="chapter" data-level="E.3" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html#高頻度データ-bidask価格-の分析"><i class="fa fa-check"></i><b>E.3</b> 高頻度データ (bid/ask価格) の分析</a></li>
<li class="chapter" data-level="E.4" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html#統計的アービトラージ-ペアトレード"><i class="fa fa-check"></i><b>E.4</b> 統計的アービトラージ / ペアトレード</a></li>
<li class="chapter" data-level="E.5" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html#国際株式市場間のヘッジ"><i class="fa fa-check"></i><b>E.5</b> 国際株式市場間のヘッジ</a></li>
<li class="chapter" data-level="E.6" data-path="共和分-誤差修正モデル.html"><a href="共和分-誤差修正モデル.html#クレジットスプレッド-株式-cds-債券-の分析"><i class="fa fa-check"></i><b>E.6</b> クレジット・スプレッド (株式, CDS, 債券) の分析</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="今後の学習のために.html"><a href="今後の学習のために.html"><i class="fa fa-check"></i><b>F</b> 今後の学習のために</a>
<ul>
<li class="chapter" data-level="F.1" data-path="今後の学習のために.html"><a href="今後の学習のために.html#ai機械学習と時系列解析"><i class="fa fa-check"></i><b>F.1</b> AI/機械学習と時系列解析</a></li>
<li class="chapter" data-level="F.2" data-path="今後の学習のために.html"><a href="今後の学習のために.html#カテゴリーデータや整数値データ等に対する時系列解析"><i class="fa fa-check"></i><b>F.2</b> カテゴリーデータや整数値データ等に対する時系列解析</a></li>
<li class="chapter" data-level="F.3" data-path="今後の学習のために.html"><a href="今後の学習のために.html#状態空間モデル動的線形モデル"><i class="fa fa-check"></i><b>F.3</b> 状態空間モデル・動的線形モデル</a></li>
<li class="chapter" data-level="F.4" data-path="今後の学習のために.html"><a href="今後の学習のために.html#その他"><i class="fa fa-check"></i><b>F.4</b> その他</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">金融時系列解析</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="header">
<h1 class="title">金融時系列解析</h1>
<p class="author"><em>林 高樹</em></p>
<p class="date"><em>2024-03-19 (内容は随時更新します)</em></p>
</div>
<div id="はじめに" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> はじめに<a href="index.html#はじめに" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!---
output:
 html_document:
   df_print: kable
   highlight: tango
   number_sections: no
   toc: no
   toc_depth: 2
   toc_float: no
   keep_md: no
   fig_caption: yes
documentclass: bxjsarticle
classoption: xelatex,ja=standard

title: "金融時系列解析"
author: "林 高樹"
date: "2024-03-19"
site: bookdown::bookdown_site
output: bookdown::html_document2: default
documentclass: bxjsbook
classoption: xelatex,ja=standard
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: rstudio/bookdown-demo
description: "UNDER CONSTRUCTION"
-->
<!-- buildエラー(9/3/22時点): 
pdf文字化け中 →
classoption: xelatex,ja=standardを挿入
→LaTeX Error: File `ctexhook.sty' not found.
-->
<div id="時系列モデリング" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> 時系列モデリング<a href="index.html#時系列モデリング" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>ターゲットの時系列データの特徴を表現できるような確率・統計モデルの構築
<ul>
<li>“stylized facts”等の中から, 重要な特徴にフォーカスする</li>
<li>実際の時系列データと構築モデルの持つ特徴が類似するように</li>
<li>時系列プロット, 散布図, ヒストグラム, 要約統計量等に関して
<ul>
<li>理論計算やシミュレーション(パスの生成)</li>
</ul></li>
<li>金融時系列データに現れる特徴は, データ期間 (例, コロナ禍以前・以後) の他, データの観測頻度 (例, 月次, 週次, 日次, 5分次) にも依存</li>
</ul></li>
<li>構築される時系列モデルに望まれる性質 (要件)
<ul>
<li>記述性 (ターゲットの時系列データとの特徴の類似性の表現)</li>
<li>解析容易性, 解釈可能性</li>
<li>操作性・取扱容易性</li>
<li>推定容易性, 計算効率性</li>
<li>モデル安定性・頑強性</li>
<li>予測精度の高さなど</li>
</ul></li>
<li>候補となるモデルは無数
<ul>
<li>汎用的で, 良い性質を持つモデルクラスに関する研究</li>
<li>時系列解析分野で中核を成すクラス → 線形+定常時系列過程</li>
</ul></li>
<li>モデル選択・推定, モデルの利用
<ul>
<li>ターゲット時系列の特徴を踏まえ. 適切なモデルクラスを選択する</li>
<li>データに対してモデルを適合し, パラメータを推定する</li>
<li>推定モデルの妥当性をチェック (モデル診断)</li>
<li>予測や制御等に利用</li>
</ul></li>
<li>本授業で扱う対象・アプローチ
<ul>
<li>目的変数(観測変数)自体が時系列構造を持ち, 時系列モデルで記述されるケースに主要な関心</li>
<li>出発点(基本的設定): 1変量の線形・定常時系列過程
→ 金融時系列データは, 線形・定常時系列過程から乖離する特徴も有する</li>
<li>→ 非線形 and/or 非定常な時系列過程へ</li>
<li><ul>
<li>観測変数が多次元で時系列構造を持つケース (多変量時系列)</li>
</ul></li>
<li><ul>
<li>外部変数のあるケース</li>
</ul></li>
</ul></li>
<li>金融時系列解析におけるチャレンジ
<ul>
<li>時系列データは, 確率過程の観点からは, 一本の”サンプルパス”の実現と見なせる</li>
<li>マクロ・ミクロの状態が 時間と共に変化する金融・経済時系列データは, 再現性の乏しいデータであると考えられる</li>
<li>さらに, 金融市場は過去に実現したデータに基づいて市場参加者が行動を変化させる</li>
<li>ある種の”法則性”を仮定しモデルにより表現することで, 金融市場においても”最適な”行動を取りたい</li>
</ul></li>
</ul>

</div>
<div id="金融時系列データの特徴" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> 金融時系列データの特徴<a href="index.html#金融時系列データの特徴" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="金融時系列データの特徴-みずほ-8411-株価データの例" class="section level3 unnumbered hasAnchor">
<h3>金融時系列データの特徴: みずほ (8411) 株価データの例<a href="index.html#金融時系列データの特徴-みずほ-8411-株価データの例" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>quantmod()による株価データの取得</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="index.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&#39;quantmod&#39;</span>)</span>
<span id="cb1-2"><a href="index.html#cb1-2" tabindex="-1"></a>YJ8411.T <span class="ot">&lt;-</span> <span class="fu">getSymbols</span>(<span class="st">&#39;8411.T&#39;</span>,<span class="at">from =</span> <span class="st">&#39;2020-10-01&#39;</span>, <span class="at">to =</span> <span class="st">&#39;2023-09-29&#39;</span>, <span class="at">src =</span> <span class="st">&quot;yahoo&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="index.html#cb1-3" tabindex="-1"></a><span class="co"># 日次株価の時系列プロット</span></span>
<span id="cb1-4"><a href="index.html#cb1-4" tabindex="-1"></a><span class="fu">chartSeries</span>(YJ8411.T)</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:quantmod-1"></span>
<img src="010-intro__files/figure-html/quantmod-1.png" alt="..." width="50%" />
<p class="caption">
Figure 1.1: …
</p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="index.html#cb2-1" tabindex="-1"></a><span class="co"># 日次4本値</span></span>
<span id="cb2-2"><a href="index.html#cb2-2" tabindex="-1"></a><span class="fu">chartSeries</span>(<span class="fu">OHLC</span>(YJ8411.T))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:quantmod-2"></span>
<img src="010-intro__files/figure-html/quantmod-2.png" alt="..." width="50%" />
<p class="caption">
Figure 1.2: …
</p>
</div>
<ul>
<li>日次収益率の時系列プロット</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="index.html#cb3-1" tabindex="-1"></a><span class="co"># 日次収益率の時系列プロット</span></span>
<span id="cb3-2"><a href="index.html#cb3-2" tabindex="-1"></a>ret_YJ8411 <span class="ot">&lt;-</span> <span class="fu">ClCl</span>(YJ8411.T)</span>
<span id="cb3-3"><a href="index.html#cb3-3" tabindex="-1"></a><span class="fu">chartSeries</span>(ret_YJ8411)</span></code></pre></div>
<p><img src="010-intro__files/figure-html/unnamed-chunk-2-1.png" width="75%" /></p>
<ul>
<li>日次収益率のヒストグラム</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="index.html#cb4-1" tabindex="-1"></a><span class="co"># 日次収益率のヒストグラム</span></span>
<span id="cb4-2"><a href="index.html#cb4-2" tabindex="-1"></a><span class="fu">hist</span>(ret_YJ8411)</span></code></pre></div>
<p><img src="010-intro__files/figure-html/unnamed-chunk-3-1.png" width="75%" /></p>
<ul>
<li>日次収益率の要約統計量</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="index.html#cb5-1" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb5-2"><a href="index.html#cb5-2" tabindex="-1"></a><span class="fu">describe</span>(ret_YJ8411)</span>
<span id="cb5-3"><a href="index.html#cb5-3" tabindex="-1"></a><span class="co">#&gt;    vars   n mean   sd median trimmed  mad   min  max range  skew kurtosis se</span></span>
<span id="cb5-4"><a href="index.html#cb5-4" tabindex="-1"></a><span class="co">#&gt; X1    1 734    0 0.01      0       0 0.01 -0.07 0.05  0.13 -0.12     1.86  0</span></span>
<span id="cb5-5"><a href="index.html#cb5-5" tabindex="-1"></a><span class="co"># 要約統計量を計算</span></span>
<span id="cb5-6"><a href="index.html#cb5-6" tabindex="-1"></a><span class="co"># デフォルト出力</span></span>
<span id="cb5-7"><a href="index.html#cb5-7" tabindex="-1"></a><span class="co"># mean</span></span>
<span id="cb5-8"><a href="index.html#cb5-8" tabindex="-1"></a><span class="co"># standard deviation</span></span>
<span id="cb5-9"><a href="index.html#cb5-9" tabindex="-1"></a><span class="co"># trimmed mean (with trim defaulting to .1) </span></span>
<span id="cb5-10"><a href="index.html#cb5-10" tabindex="-1"></a><span class="co"># median (standard or interpolated</span></span>
<span id="cb5-11"><a href="index.html#cb5-11" tabindex="-1"></a><span class="co"># mad: median absolute deviation (from the median). </span></span>
<span id="cb5-12"><a href="index.html#cb5-12" tabindex="-1"></a><span class="co"># minimum</span></span>
<span id="cb5-13"><a href="index.html#cb5-13" tabindex="-1"></a><span class="co"># maximum</span></span>
<span id="cb5-14"><a href="index.html#cb5-14" tabindex="-1"></a><span class="co"># skew</span></span>
<span id="cb5-15"><a href="index.html#cb5-15" tabindex="-1"></a><span class="co"># kurtosis</span></span>
<span id="cb5-16"><a href="index.html#cb5-16" tabindex="-1"></a><span class="co"># standard error</span></span>
<span id="cb5-17"><a href="index.html#cb5-17" tabindex="-1"></a><span class="co"># 注) kurtosisは-3した値</span></span></code></pre></div>
<ul>
<li>日次収益率の自己相関</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="index.html#cb6-1" tabindex="-1"></a><span class="co"># 日次収益率の自己相関</span></span>
<span id="cb6-2"><a href="index.html#cb6-2" tabindex="-1"></a><span class="fu">acf</span>(ret_YJ8411, <span class="at">na.action =</span> na.pass)</span></code></pre></div>
<p><img src="010-intro__files/figure-html/unnamed-chunk-5-1.png" width="75%" /></p>
<ul>
<li>日次収益率絶対値の自己相関</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="index.html#cb7-1" tabindex="-1"></a><span class="co"># 日次収益率絶対値の自己相関</span></span>
<span id="cb7-2"><a href="index.html#cb7-2" tabindex="-1"></a><span class="fu">acf</span>(<span class="fu">abs</span>(ret_YJ8411), <span class="at">na.action =</span> na.pass)</span></code></pre></div>
<p><img src="010-intro__files/figure-html/unnamed-chunk-6-1.png" width="75%" /></p>
</div>
</div>
<div id="シミュレーションによるサンプルパス生成" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> シミュレーションによるサンプルパス生成<a href="index.html#シミュレーションによるサンプルパス生成" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>時系列モデリングでは, 観測時系列データの特徴と比較し, 適切なモデルを見い出すため, シミュレーションを積極的に利用する</li>
<li>正規AR(1)モデルの例: <span class="math inline">\(X(t)=\phi X(t-1) + W(t)\)</span>, <span class="math inline">\(W(t) \sim_{i,i.d.} N(0,\sigma^2)\)</span></li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="index.html#cb8-1" tabindex="-1"></a>x.ts <span class="ot">=</span> <span class="cn">NULL</span>; Tlen <span class="ot">=</span> <span class="dv">50</span></span>
<span id="cb8-2"><a href="index.html#cb8-2" tabindex="-1"></a>phi <span class="ot">=</span> <span class="sc">-</span><span class="fl">0.8</span>; s <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb8-3"><a href="index.html#cb8-3" tabindex="-1"></a><span class="cf">for</span> (seed.tmp <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>){</span>
<span id="cb8-4"><a href="index.html#cb8-4" tabindex="-1"></a><span class="fu">set.seed</span>(seed.tmp)</span>
<span id="cb8-5"><a href="index.html#cb8-5" tabindex="-1"></a>x <span class="ot">=</span> w <span class="ot">=</span> <span class="fu">rnorm</span>(Tlen) <span class="sc">*</span> s</span>
<span id="cb8-6"><a href="index.html#cb8-6" tabindex="-1"></a><span class="cf">for</span> (t <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span>Tlen) x[t] <span class="ot">=</span> phi <span class="sc">*</span> x[t<span class="dv">-1</span>] <span class="sc">+</span> w[t]  <span class="co"># </span></span>
<span id="cb8-7"><a href="index.html#cb8-7" tabindex="-1"></a>x.ts <span class="ot">=</span> <span class="fu">ts.intersect</span>(x.ts, <span class="fu">ts</span>(<span class="fu">cumsum</span>(x)))</span>
<span id="cb8-8"><a href="index.html#cb8-8" tabindex="-1"></a>}</span>
<span id="cb8-9"><a href="index.html#cb8-9" tabindex="-1"></a><span class="fu">ts.plot</span>(x.ts, <span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">col=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lty=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">ylab=</span><span class="st">&quot;&quot;</span>,<span class="at">main=</span><span class="st">&quot;Simulated sample paths&quot;</span>)</span></code></pre></div>
<p><img src="010-intro__files/figure-html/simulation-1.png" width="75%" style="display: block; margin: auto;" /></p>

</div>
<div id="rにおける時系列オブジェクトクラスおよび関数の例" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Rにおける時系列オブジェクト・クラスおよび関数の例<a href="index.html#rにおける時系列オブジェクトクラスおよび関数の例" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--
- 分かりにくい(作業中)
- Rのオブジェクト: type, mode, classの3種類の型が存在.
  - type: 基本型. ベクトル(vector), リスト(list), 関数(function), 等
  - mode: 基本型がベクトルであるオブジェクトについて, 格納されている値の種類を示す型. 整数型(integer(numeric)), 実数(double(numeric)), 複素数(complex), 文字(character), 論理(logical), 等
  - class型: そのオブジェクトがもつ属性. 行列, 配列, 因子, データフレーム, 等.
- 出所: https://stats.biopapyrus.jp/r/basic/data-type.html
- https://htsuda.net/stats/data-basics.html
- http://www.f.waseda.jp/sakas/R/Rdata.html

- Rコード出所:
  - CM, Ch.1
  - R Cookbook

-->
<div id="日付時間データに対するクラス" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> 日付・時間データに対するクラス<a href="index.html#日付時間データに対するクラス" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="dateクラス" class="section level4 hasAnchor" number="1.4.1.1">
<h4><span class="header-section-number">1.4.1.1</span> Dateクラス<a href="index.html#dateクラス" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>日付を表現する</li>
<li>R内部的には, “Date”というclass属性を持つdouble型の値を持つ</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="index.html#cb9-1" tabindex="-1"></a><span class="co"># as.Date(): 日付を表す文字列をDate型に変更する</span></span>
<span id="cb9-2"><a href="index.html#cb9-2" tabindex="-1"></a>tomorrow <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;2023-10-04&quot;</span>)</span>
<span id="cb9-3"><a href="index.html#cb9-3" tabindex="-1"></a>tomorrow</span>
<span id="cb9-4"><a href="index.html#cb9-4" tabindex="-1"></a><span class="do">## [1] &quot;2023-10-04&quot;</span></span>
<span id="cb9-5"><a href="index.html#cb9-5" tabindex="-1"></a><span class="fu">attributes</span>(tomorrow) <span class="co"># 出力オブジェクトの属性(attribute)</span></span>
<span id="cb9-6"><a href="index.html#cb9-6" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb9-7"><a href="index.html#cb9-7" tabindex="-1"></a><span class="do">## [1] &quot;Date&quot;</span></span>
<span id="cb9-8"><a href="index.html#cb9-8" tabindex="-1"></a><span class="co"># typeof(tomorrow) # 出力オブジェクトの型(type)</span></span>
<span id="cb9-9"><a href="index.html#cb9-9" tabindex="-1"></a><span class="co"># typeof(&quot;2023-10-23&quot;) # 入力オブジェクトの型(type)</span></span>
<span id="cb9-10"><a href="index.html#cb9-10" tabindex="-1"></a></span>
<span id="cb9-11"><a href="index.html#cb9-11" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb9-12"><a href="index.html#cb9-12" tabindex="-1"></a>today</span>
<span id="cb9-13"><a href="index.html#cb9-13" tabindex="-1"></a><span class="do">## [1] &quot;2024-03-19&quot;</span></span></code></pre></div>
</div>
<div id="posixctクラス" class="section level4 hasAnchor" number="1.4.1.2">
<h4><span class="header-section-number">1.4.1.2</span> POSIXctクラス<a href="index.html#posixctクラス" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>日時 (日-時間) を表現する</li>
<li>Rの内部的には, “POSIXct”というclass属性を持つdouble型の値を持つ</li>
<li>POSIX = Portable Operating System Interfaceの略</li>
<li>POSIXct, POSXltの2種類: ct = calender time, lt = local time</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="index.html#cb10-1" tabindex="-1"></a>now_ct <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">&quot;2023-10-05 19:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;UTC&quot;</span>)</span>
<span id="cb10-2"><a href="index.html#cb10-2" tabindex="-1"></a>now_ct</span>
<span id="cb10-3"><a href="index.html#cb10-3" tabindex="-1"></a><span class="do">## [1] &quot;2023-10-05 19:00:00 UTC&quot;</span></span>
<span id="cb10-4"><a href="index.html#cb10-4" tabindex="-1"></a><span class="fu">attributes</span>(now_ct)</span>
<span id="cb10-5"><a href="index.html#cb10-5" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb10-6"><a href="index.html#cb10-6" tabindex="-1"></a><span class="do">## [1] &quot;POSIXct&quot; &quot;POSIXt&quot; </span></span>
<span id="cb10-7"><a href="index.html#cb10-7" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb10-8"><a href="index.html#cb10-8" tabindex="-1"></a><span class="do">## $tzone</span></span>
<span id="cb10-9"><a href="index.html#cb10-9" tabindex="-1"></a><span class="do">## [1] &quot;UTC&quot;</span></span>
<span id="cb10-10"><a href="index.html#cb10-10" tabindex="-1"></a></span>
<span id="cb10-11"><a href="index.html#cb10-11" tabindex="-1"></a>tomorrow_ct <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">&quot;2023-10-06 20:00&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;UTC&quot;</span>)</span>
<span id="cb10-12"><a href="index.html#cb10-12" tabindex="-1"></a></span>
<span id="cb10-13"><a href="index.html#cb10-13" tabindex="-1"></a>tomorrow_ct <span class="sc">-</span> now_ct <span class="co"># 時間差(1日当たり)</span></span>
<span id="cb10-14"><a href="index.html#cb10-14" tabindex="-1"></a><span class="do">## Time difference of 1.041667 days</span></span>
<span id="cb10-15"><a href="index.html#cb10-15" tabindex="-1"></a><span class="fu">attributes</span>(tomorrow_ct <span class="sc">-</span> now_ct)</span>
<span id="cb10-16"><a href="index.html#cb10-16" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb10-17"><a href="index.html#cb10-17" tabindex="-1"></a><span class="do">## [1] &quot;difftime&quot;</span></span>
<span id="cb10-18"><a href="index.html#cb10-18" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb10-19"><a href="index.html#cb10-19" tabindex="-1"></a><span class="do">## $units</span></span>
<span id="cb10-20"><a href="index.html#cb10-20" tabindex="-1"></a><span class="do">## [1] &quot;days&quot;</span></span></code></pre></div>
</div>
<div id="difftimeクラス" class="section level4 hasAnchor" number="1.4.1.3">
<h4><span class="header-section-number">1.4.1.3</span> difftimeクラス<a href="index.html#difftimeクラス" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>時間差を表現する</li>
<li>Rの内部的には, “POSIXct”というclass属性を持つdouble型の値を持つ</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="index.html#cb11-1" tabindex="-1"></a>onewk_1 <span class="ot">&lt;-</span> <span class="fu">as.difftime</span>(<span class="dv">1</span>, <span class="at">units =</span> <span class="st">&quot;weeks&quot;</span>)</span>
<span id="cb11-2"><a href="index.html#cb11-2" tabindex="-1"></a>onewk_1</span>
<span id="cb11-3"><a href="index.html#cb11-3" tabindex="-1"></a><span class="do">## Time difference of 1 weeks</span></span>
<span id="cb11-4"><a href="index.html#cb11-4" tabindex="-1"></a><span class="fu">typeof</span>(onewk_1)</span>
<span id="cb11-5"><a href="index.html#cb11-5" tabindex="-1"></a><span class="do">## [1] &quot;double&quot;</span></span>
<span id="cb11-6"><a href="index.html#cb11-6" tabindex="-1"></a><span class="fu">attributes</span>(onewk_1)</span>
<span id="cb11-7"><a href="index.html#cb11-7" tabindex="-1"></a><span class="do">## $class</span></span>
<span id="cb11-8"><a href="index.html#cb11-8" tabindex="-1"></a><span class="do">## [1] &quot;difftime&quot;</span></span>
<span id="cb11-9"><a href="index.html#cb11-9" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb11-10"><a href="index.html#cb11-10" tabindex="-1"></a><span class="do">## $units</span></span>
<span id="cb11-11"><a href="index.html#cb11-11" tabindex="-1"></a><span class="do">## [1] &quot;weeks&quot;</span></span>
<span id="cb11-12"><a href="index.html#cb11-12" tabindex="-1"></a></span>
<span id="cb11-13"><a href="index.html#cb11-13" tabindex="-1"></a>onewk_2 <span class="ot">&lt;-</span> <span class="fu">as.difftime</span>(<span class="dv">7</span>, <span class="at">units =</span> <span class="st">&quot;days&quot;</span>)</span>
<span id="cb11-14"><a href="index.html#cb11-14" tabindex="-1"></a>onewk_2</span>
<span id="cb11-15"><a href="index.html#cb11-15" tabindex="-1"></a><span class="do">## Time difference of 7 days</span></span></code></pre></div>
</div>
<div id="よりモダンかつ柔軟な日付や時間の操作" class="section level4 hasAnchor" number="1.4.1.4">
<h4><span class="header-section-number">1.4.1.4</span> よりモダンかつ柔軟な日付や時間の操作<a href="index.html#よりモダンかつ柔軟な日付や時間の操作" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>lubridateパッケージ</li>
<li>hmsパッケージ (日内時間の操作・蓄積に特化)</li>
</ul>
</div>
</div>
<div id="時系列データに対するクラス1-tsクラス" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> 時系列データに対するクラス(1): tsクラス<a href="index.html#時系列データに対するクラス1-tsクラス" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>tsクラス: Rの時系列オブジェクトの基本クラス</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="index.html#cb12-1" tabindex="-1"></a><span class="co"># AirPassengers, </span></span>
<span id="cb12-2"><a href="index.html#cb12-2" tabindex="-1"></a><span class="co"># Pan Am, # international passenger bokking (in 1000s) per month</span></span>
<span id="cb12-3"><a href="index.html#cb12-3" tabindex="-1"></a><span class="co"># 1949--1960 (Brown, 1963)</span></span>
<span id="cb12-4"><a href="index.html#cb12-4" tabindex="-1"></a><span class="fu">data</span>(AirPassengers)</span>
<span id="cb12-5"><a href="index.html#cb12-5" tabindex="-1"></a>ap <span class="ot">&lt;-</span> AirPassengers</span>
<span id="cb12-6"><a href="index.html#cb12-6" tabindex="-1"></a>ap</span>
<span id="cb12-7"><a href="index.html#cb12-7" tabindex="-1"></a><span class="do">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></span>
<span id="cb12-8"><a href="index.html#cb12-8" tabindex="-1"></a><span class="do">## 1949 112 118 132 129 121 135 148 148 136 119 104 118</span></span>
<span id="cb12-9"><a href="index.html#cb12-9" tabindex="-1"></a><span class="do">## 1950 115 126 141 135 125 149 170 170 158 133 114 140</span></span>
<span id="cb12-10"><a href="index.html#cb12-10" tabindex="-1"></a><span class="do">## 1951 145 150 178 163 172 178 199 199 184 162 146 166</span></span>
<span id="cb12-11"><a href="index.html#cb12-11" tabindex="-1"></a><span class="do">## 1952 171 180 193 181 183 218 230 242 209 191 172 194</span></span>
<span id="cb12-12"><a href="index.html#cb12-12" tabindex="-1"></a><span class="do">## 1953 196 196 236 235 229 243 264 272 237 211 180 201</span></span>
<span id="cb12-13"><a href="index.html#cb12-13" tabindex="-1"></a><span class="do">## 1954 204 188 235 227 234 264 302 293 259 229 203 229</span></span>
<span id="cb12-14"><a href="index.html#cb12-14" tabindex="-1"></a><span class="do">## 1955 242 233 267 269 270 315 364 347 312 274 237 278</span></span>
<span id="cb12-15"><a href="index.html#cb12-15" tabindex="-1"></a><span class="do">## 1956 284 277 317 313 318 374 413 405 355 306 271 306</span></span>
<span id="cb12-16"><a href="index.html#cb12-16" tabindex="-1"></a><span class="do">## 1957 315 301 356 348 355 422 465 467 404 347 305 336</span></span>
<span id="cb12-17"><a href="index.html#cb12-17" tabindex="-1"></a><span class="do">## 1958 340 318 362 348 363 435 491 505 404 359 310 337</span></span>
<span id="cb12-18"><a href="index.html#cb12-18" tabindex="-1"></a><span class="do">## 1959 360 342 406 396 420 472 548 559 463 407 362 405</span></span>
<span id="cb12-19"><a href="index.html#cb12-19" tabindex="-1"></a><span class="do">## 1960 417 391 419 461 472 535 622 606 508 461 390 432</span></span>
<span id="cb12-20"><a href="index.html#cb12-20" tabindex="-1"></a><span class="co">#is.ts(ap); is.vector(ap)</span></span>
<span id="cb12-21"><a href="index.html#cb12-21" tabindex="-1"></a><span class="co">#attributes(ap)</span></span>
<span id="cb12-22"><a href="index.html#cb12-22" tabindex="-1"></a><span class="fu">class</span>(ap)       <span class="co"># tsクラス</span></span>
<span id="cb12-23"><a href="index.html#cb12-23" tabindex="-1"></a><span class="do">## [1] &quot;ts&quot;</span></span>
<span id="cb12-24"><a href="index.html#cb12-24" tabindex="-1"></a><span class="fu">start</span>(ap); <span class="fu">end</span>(ap); <span class="fu">frequency</span>(ap)</span>
<span id="cb12-25"><a href="index.html#cb12-25" tabindex="-1"></a><span class="do">## [1] 1949    1</span></span>
<span id="cb12-26"><a href="index.html#cb12-26" tabindex="-1"></a><span class="do">## [1] 1960   12</span></span>
<span id="cb12-27"><a href="index.html#cb12-27" tabindex="-1"></a><span class="do">## [1] 12</span></span>
<span id="cb12-28"><a href="index.html#cb12-28" tabindex="-1"></a><span class="fu">plot</span>(ap, <span class="at">ylab =</span> <span class="st">&quot;Passengers (1000&#39;s)&quot;</span>)</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-9-1.png" width="75%" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="index.html#cb13-1" tabindex="-1"></a><span class="fu">layout</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb13-2"><a href="index.html#cb13-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">aggregate</span>(ap))     <span class="co"># annual levelに累計, seasonal effectsの除去、trend</span></span>
<span id="cb13-3"><a href="index.html#cb13-3" tabindex="-1"></a><span class="fu">cycle</span>(ap)                   <span class="co"># データ内各アイテムのシーズン抽出</span></span>
<span id="cb13-4"><a href="index.html#cb13-4" tabindex="-1"></a><span class="do">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></span>
<span id="cb13-5"><a href="index.html#cb13-5" tabindex="-1"></a><span class="do">## 1949   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-6"><a href="index.html#cb13-6" tabindex="-1"></a><span class="do">## 1950   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-7"><a href="index.html#cb13-7" tabindex="-1"></a><span class="do">## 1951   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-8"><a href="index.html#cb13-8" tabindex="-1"></a><span class="do">## 1952   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-9"><a href="index.html#cb13-9" tabindex="-1"></a><span class="do">## 1953   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-10"><a href="index.html#cb13-10" tabindex="-1"></a><span class="do">## 1954   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-11"><a href="index.html#cb13-11" tabindex="-1"></a><span class="do">## 1955   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-12"><a href="index.html#cb13-12" tabindex="-1"></a><span class="do">## 1956   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-13"><a href="index.html#cb13-13" tabindex="-1"></a><span class="do">## 1957   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-14"><a href="index.html#cb13-14" tabindex="-1"></a><span class="do">## 1958   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-15"><a href="index.html#cb13-15" tabindex="-1"></a><span class="do">## 1959   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-16"><a href="index.html#cb13-16" tabindex="-1"></a><span class="do">## 1960   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb13-17"><a href="index.html#cb13-17" tabindex="-1"></a><span class="fu">boxplot</span>(ap <span class="sc">~</span> <span class="fu">cycle</span>(ap))     <span class="co"># seasonal effects</span></span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-9-2.png" width="75%" /></p>
</div>
<div id="時系列データに対するクラス2-zooクラスとxtsクラス" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> 時系列データに対するクラス(2): zooクラスとxtsクラス<a href="index.html#時系列データに対するクラス2-zooクラスとxtsクラス" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>有用な時系列オブジェクトのクラス: zoo, xts
<ul>
<li>zoo, xts共に, 多変量時系列を扱うことも可能</li>
<li>xtsは, zooに類似. かつ, 高速なため, 大規模DATAの処理に適している</li>
<li>zooやxtsのメリット. 有用な関数が多数用意されている:</li>
<li>differencing, merging, periodic sampling, applying rolling functions</li>
<li>xtsパッケージは, zooパッケージが出来ること全てできる</li>
</ul></li>
</ul>
<pre><code>- zooクラス・オブジェクトの生成
  - ts &lt;- zoo(x, dt)
  - 時間(index)は, Dateオブジェクト, POSIXctオブジェクト, 整数, 浮動小数点でも, 順序付き数値なら何でもOK
- xtsクラス・オブジェクトの生成
  - ts &lt;- xts(x, dt)
  - 時間(index)は, Dateオブジェクト, POSIXctオブジェクト等、日付や時間のクラスのみに対応</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="index.html#cb15-1" tabindex="-1"></a><span class="co"># R マニュアル</span></span>
<span id="cb15-2"><a href="index.html#cb15-2" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;zoo&quot;</span>)</span>
<span id="cb15-3"><a href="index.html#cb15-3" tabindex="-1"></a><span class="fu">vignette</span>(<span class="st">&quot;xts&quot;</span>)</span></code></pre></div>
<ul>
<li>zooクラス
<!-- R Cookbook, pp.356--364参考 --></li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="index.html#cb16-1" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb16-2"><a href="index.html#cb16-2" tabindex="-1"></a><span class="co"># 日経平均先物(ラージ), 2018年2月5日, 1日内約定データ</span></span>
<span id="cb16-3"><a href="index.html#cb16-3" tabindex="-1"></a>prices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">22790</span>, <span class="dv">22800</span>, <span class="dv">22790</span>, <span class="dv">22790</span>, <span class="dv">22790</span>)</span>
<span id="cb16-4"><a href="index.html#cb16-4" tabindex="-1"></a>seconds <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">32400.014</span>, <span class="fl">32400.020</span>, <span class="fl">32400.035</span>, <span class="fl">32400.036</span>) <span class="co"># タイムスタンプ (秒)</span></span>
<span id="cb16-5"><a href="index.html#cb16-5" tabindex="-1"></a>nkft_sec <span class="ot">&lt;-</span> <span class="fu">zoo</span>(prices, seconds)</span>
<span id="cb16-6"><a href="index.html#cb16-6" tabindex="-1"></a><span class="fu">print</span>(nkft_sec)</span>
<span id="cb16-7"><a href="index.html#cb16-7" tabindex="-1"></a><span class="do">## 32400.014  32400.02 32400.035 32400.036 </span></span>
<span id="cb16-8"><a href="index.html#cb16-8" tabindex="-1"></a><span class="do">##     22790     22800     22790     22790</span></span>
<span id="cb16-9"><a href="index.html#cb16-9" tabindex="-1"></a></span>
<span id="cb16-10"><a href="index.html#cb16-10" tabindex="-1"></a><span class="co"># 同, 2023年9月25日〜9月29日(5営業日)</span></span>
<span id="cb16-11"><a href="index.html#cb16-11" tabindex="-1"></a>prices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">32480</span>, <span class="dv">32080</span>, <span class="dv">32150</span>, <span class="dv">31850</span>, <span class="dv">32020</span>)</span>
<span id="cb16-12"><a href="index.html#cb16-12" tabindex="-1"></a>dates <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2023-09-25&quot;</span>, <span class="st">&quot;2023-09-26&quot;</span>, <span class="st">&quot;2023-09-27&quot;</span>, <span class="st">&quot;2023-09-28&quot;</span>, <span class="st">&quot;2023-09-29&quot;</span>)) <span class="co"># 日付</span></span>
<span id="cb16-13"><a href="index.html#cb16-13" tabindex="-1"></a>nkft_daily <span class="ot">&lt;-</span> <span class="fu">zoo</span>(prices, dates)</span>
<span id="cb16-14"><a href="index.html#cb16-14" tabindex="-1"></a><span class="fu">print</span>(nkft_daily)</span>
<span id="cb16-15"><a href="index.html#cb16-15" tabindex="-1"></a><span class="do">## 2023-09-25 2023-09-26 2023-09-27 2023-09-28 2023-09-29 </span></span>
<span id="cb16-16"><a href="index.html#cb16-16" tabindex="-1"></a><span class="do">##      32480      32080      32150      31850      32020</span></span>
<span id="cb16-17"><a href="index.html#cb16-17" tabindex="-1"></a></span>
<span id="cb16-18"><a href="index.html#cb16-18" tabindex="-1"></a></span>
<span id="cb16-19"><a href="index.html#cb16-19" tabindex="-1"></a><span class="fu">coredata</span>(nkft_daily) <span class="co"># 株価の取り出し</span></span>
<span id="cb16-20"><a href="index.html#cb16-20" tabindex="-1"></a><span class="do">## [1] 32480 32080 32150 31850 32020</span></span>
<span id="cb16-21"><a href="index.html#cb16-21" tabindex="-1"></a><span class="fu">index</span>(nkft_daily) <span class="co"># 時間の取り出し</span></span>
<span id="cb16-22"><a href="index.html#cb16-22" tabindex="-1"></a><span class="do">## [1] &quot;2023-09-25&quot; &quot;2023-09-26&quot; &quot;2023-09-27&quot; &quot;2023-09-28&quot; &quot;2023-09-29&quot;</span></span>
<span id="cb16-23"><a href="index.html#cb16-23" tabindex="-1"></a><span class="fu">coredata</span>(nkft_sec)</span>
<span id="cb16-24"><a href="index.html#cb16-24" tabindex="-1"></a><span class="do">## [1] 22790 22800 22790 22790</span></span>
<span id="cb16-25"><a href="index.html#cb16-25" tabindex="-1"></a><span class="fu">index</span>(nkft_sec)</span>
<span id="cb16-26"><a href="index.html#cb16-26" tabindex="-1"></a><span class="do">## [1] 32400.01 32400.02 32400.03 32400.04</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="index.html#cb17-1" tabindex="-1"></a>nkft_daily[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb17-2"><a href="index.html#cb17-2" tabindex="-1"></a><span class="do">## 2023-09-26 2023-09-27 2023-09-28 </span></span>
<span id="cb17-3"><a href="index.html#cb17-3" tabindex="-1"></a><span class="do">##      32080      32150      31850</span></span>
<span id="cb17-4"><a href="index.html#cb17-4" tabindex="-1"></a>nkft_daily[<span class="fu">as.Date</span>(<span class="st">&quot;2023-09-26&quot;</span>)]</span>
<span id="cb17-5"><a href="index.html#cb17-5" tabindex="-1"></a><span class="do">## 2023-09-26 </span></span>
<span id="cb17-6"><a href="index.html#cb17-6" tabindex="-1"></a><span class="do">##      32080</span></span>
<span id="cb17-7"><a href="index.html#cb17-7" tabindex="-1"></a>nkft_daily[<span class="st">&quot;2023-09-26&quot;</span>]        <span class="co"># &lt;-- NO</span></span>
<span id="cb17-8"><a href="index.html#cb17-8" tabindex="-1"></a><span class="do">## 2023-09-26 </span></span>
<span id="cb17-9"><a href="index.html#cb17-9" tabindex="-1"></a><span class="do">##      32080</span></span>
<span id="cb17-10"><a href="index.html#cb17-10" tabindex="-1"></a><span class="fu">window</span>(nkft_daily, <span class="at">start =</span> <span class="fu">as.Date</span>(<span class="st">&#39;2023-09-26&#39;</span>), <span class="at">end =</span> <span class="fu">as.Date</span>(<span class="st">&#39;2023-09-28&#39;</span>))</span>
<span id="cb17-11"><a href="index.html#cb17-11" tabindex="-1"></a><span class="do">## 2023-09-26 2023-09-27 2023-09-28 </span></span>
<span id="cb17-12"><a href="index.html#cb17-12" tabindex="-1"></a><span class="do">##      32080      32150      31850</span></span>
<span id="cb17-13"><a href="index.html#cb17-13" tabindex="-1"></a></span>
<span id="cb17-14"><a href="index.html#cb17-14" tabindex="-1"></a><span class="fu">library</span>(xts)</span>
<span id="cb17-15"><a href="index.html#cb17-15" tabindex="-1"></a><span class="fu">first</span>(nkft_sec) <span class="co"># 最初のデータ</span></span>
<span id="cb17-16"><a href="index.html#cb17-16" tabindex="-1"></a><span class="do">## 32400.014 </span></span>
<span id="cb17-17"><a href="index.html#cb17-17" tabindex="-1"></a><span class="do">##     22790</span></span>
<span id="cb17-18"><a href="index.html#cb17-18" tabindex="-1"></a><span class="fu">last</span>(nkft_sec) <span class="co"># 最後のデータ</span></span>
<span id="cb17-19"><a href="index.html#cb17-19" tabindex="-1"></a><span class="do">## 32400.036 </span></span>
<span id="cb17-20"><a href="index.html#cb17-20" tabindex="-1"></a><span class="do">##     22790</span></span></code></pre></div>
<div id="quantmodパッケージの利用による株価取得-チャート作成" class="section level4 hasAnchor" number="1.4.3.1">
<h4><span class="header-section-number">1.4.3.1</span> quantmodパッケージの利用による株価取得 &amp; チャート作成<a href="index.html#quantmodパッケージの利用による株価取得-チャート作成" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="index.html#cb18-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&#39;quantmod&#39;</span>)</span>
<span id="cb18-2"><a href="index.html#cb18-2" tabindex="-1"></a>yj8411 <span class="ot">&lt;-</span> <span class="fu">getSymbols</span>(<span class="st">&#39;8411.T&#39;</span>,<span class="at">from =</span> <span class="st">&#39;2020-10-01&#39;</span>, <span class="at">to =</span> <span class="st">&#39;2023-09-29&#39;</span>, <span class="at">src =</span> <span class="st">&quot;yahoo&quot;</span>, <span class="at">auto.assign =</span> <span class="cn">FALSE</span>)   <span class="co"># 注) R/RStudioや, guantmodのバージョンによっては, 動かないことがある</span></span>
<span id="cb18-3"><a href="index.html#cb18-3" tabindex="-1"></a><span class="co"># 注) 画面に&quot;Error in new.session() : Could not establish session after 5 attempts.&quot;が表示され,</span></span>
<span id="cb18-4"><a href="index.html#cb18-4" tabindex="-1"></a><span class="co"># 株価を取得できない場合には, quantmodのバージョンを最新のものにすること.</span></span>
<span id="cb18-5"><a href="index.html#cb18-5" tabindex="-1"></a></span>
<span id="cb18-6"><a href="index.html#cb18-6" tabindex="-1"></a><span class="fu">chartSeries</span>(<span class="fu">ClCl</span>(yj8411))</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-13-1.png" width="75%" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="index.html#cb19-1" tabindex="-1"></a><span class="fu">chartSeries</span>(yj8411)</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-13-2.png" width="75%" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="index.html#cb20-1" tabindex="-1"></a><span class="fu">chartSeries</span>(<span class="fu">OHLC</span>(yj8411))</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-13-3.png" width="75%" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="index.html#cb21-1" tabindex="-1"></a></span>
<span id="cb21-2"><a href="index.html#cb21-2" tabindex="-1"></a>Mizuho_ret <span class="ot">&lt;-</span> <span class="fu">diff</span>(<span class="fu">log</span>(<span class="fu">Ad</span>(yj8411))) <span class="co"># Adjusted price</span></span>
<span id="cb21-3"><a href="index.html#cb21-3" tabindex="-1"></a><span class="fu">plot</span>(Mizuho_ret)</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-13-4.png" width="75%" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="index.html#cb22-1" tabindex="-1"></a><span class="fu">chartSeries</span>(Mizuho_ret)</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-13-5.png" width="75%" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="index.html#cb23-1" tabindex="-1"></a><span class="fu">class</span>(Mizuho_ret)</span>
<span id="cb23-2"><a href="index.html#cb23-2" tabindex="-1"></a><span class="do">## [1] &quot;xts&quot; &quot;zoo&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="index.html#cb24-1" tabindex="-1"></a><span class="co"># 便利な関数の例</span></span>
<span id="cb24-2"><a href="index.html#cb24-2" tabindex="-1"></a>Mizuho_m <span class="ot">&lt;-</span> <span class="fu">apply.monthly</span>(Mizuho_ret, mean, <span class="at">na.rm =</span> T)      <span class="co"># xts</span></span>
<span id="cb24-3"><a href="index.html#cb24-3" tabindex="-1"></a>Mizuho_w <span class="ot">&lt;-</span> <span class="fu">apply.weekly</span>(Mizuho_ret, mean, <span class="at">na.rm =</span> T)           <span class="co"># xts</span></span>
<span id="cb24-4"><a href="index.html#cb24-4" tabindex="-1"></a><span class="co"># zooオブジェクトの場合, 一旦xtsに変換して適用</span></span>
<span id="cb24-5"><a href="index.html#cb24-5" tabindex="-1"></a><span class="co"># apply.monthly(as.xts(ts), df)</span></span>
<span id="cb24-6"><a href="index.html#cb24-6" tabindex="-1"></a></span>
<span id="cb24-7"><a href="index.html#cb24-7" tabindex="-1"></a>Mizuho_ma5 <span class="ot">&lt;-</span> <span class="fu">rollapply</span>(Mizuho_ret, <span class="at">width =</span> <span class="dv">5</span>, mean, <span class="at">align =</span> <span class="st">&quot;right&quot;</span>)   <span class="co"># zooパッケージ内</span></span>
<span id="cb24-8"><a href="index.html#cb24-8" tabindex="-1"></a><span class="fu">head</span>(Mizuho_ma5)</span>
<span id="cb24-9"><a href="index.html#cb24-9" tabindex="-1"></a><span class="do">##            8411.T.Adjusted</span></span>
<span id="cb24-10"><a href="index.html#cb24-10" tabindex="-1"></a><span class="do">## 2020-10-02              NA</span></span>
<span id="cb24-11"><a href="index.html#cb24-11" tabindex="-1"></a><span class="do">## 2020-10-05              NA</span></span>
<span id="cb24-12"><a href="index.html#cb24-12" tabindex="-1"></a><span class="do">## 2020-10-06              NA</span></span>
<span id="cb24-13"><a href="index.html#cb24-13" tabindex="-1"></a><span class="do">## 2020-10-07              NA</span></span>
<span id="cb24-14"><a href="index.html#cb24-14" tabindex="-1"></a><span class="do">## 2020-10-08              NA</span></span>
<span id="cb24-15"><a href="index.html#cb24-15" tabindex="-1"></a><span class="do">## 2020-10-09     0.002418767</span></span>
<span id="cb24-16"><a href="index.html#cb24-16" tabindex="-1"></a><span class="co">#Mizuho_ma21 &lt;- rollapply(Mizuho_ret, width = 21, mean, align = &quot;right&quot;)    # zooパッケージ内</span></span>
<span id="cb24-17"><a href="index.html#cb24-17" tabindex="-1"></a><span class="co"># timestamp is taken from the rightmost value</span></span>
<span id="cb24-18"><a href="index.html#cb24-18" tabindex="-1"></a></span>
<span id="cb24-19"><a href="index.html#cb24-19" tabindex="-1"></a><span class="fu">chartSeries</span>(Mizuho_ma5)</span></code></pre></div>
<p><img src="012-tsobjects_files/figure-html/unnamed-chunk-15-1.png" width="75%" /></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="index.html#cb25-1" tabindex="-1"></a><span class="co">#chartSeries(Mizuho_ma21)</span></span></code></pre></div>

</div>
</div>
</div>
<div id="時系列データの分解" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> 時系列データの分解<a href="index.html#時系列データの分解" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>- データセット: AirPassengers
- Pan Am, # international passenger bokking (in 1000s) per month
- 1949--1960 (Brown, 1963)</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="index.html#cb27-1" tabindex="-1"></a><span class="fu">data</span>(AirPassengers)</span>
<span id="cb27-2"><a href="index.html#cb27-2" tabindex="-1"></a>ap <span class="ot">&lt;-</span> AirPassengers</span>
<span id="cb27-3"><a href="index.html#cb27-3" tabindex="-1"></a>ap</span>
<span id="cb27-4"><a href="index.html#cb27-4" tabindex="-1"></a><span class="do">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></span>
<span id="cb27-5"><a href="index.html#cb27-5" tabindex="-1"></a><span class="do">## 1949 112 118 132 129 121 135 148 148 136 119 104 118</span></span>
<span id="cb27-6"><a href="index.html#cb27-6" tabindex="-1"></a><span class="do">## 1950 115 126 141 135 125 149 170 170 158 133 114 140</span></span>
<span id="cb27-7"><a href="index.html#cb27-7" tabindex="-1"></a><span class="do">## 1951 145 150 178 163 172 178 199 199 184 162 146 166</span></span>
<span id="cb27-8"><a href="index.html#cb27-8" tabindex="-1"></a><span class="do">## 1952 171 180 193 181 183 218 230 242 209 191 172 194</span></span>
<span id="cb27-9"><a href="index.html#cb27-9" tabindex="-1"></a><span class="do">## 1953 196 196 236 235 229 243 264 272 237 211 180 201</span></span>
<span id="cb27-10"><a href="index.html#cb27-10" tabindex="-1"></a><span class="do">## 1954 204 188 235 227 234 264 302 293 259 229 203 229</span></span>
<span id="cb27-11"><a href="index.html#cb27-11" tabindex="-1"></a><span class="do">## 1955 242 233 267 269 270 315 364 347 312 274 237 278</span></span>
<span id="cb27-12"><a href="index.html#cb27-12" tabindex="-1"></a><span class="do">## 1956 284 277 317 313 318 374 413 405 355 306 271 306</span></span>
<span id="cb27-13"><a href="index.html#cb27-13" tabindex="-1"></a><span class="do">## 1957 315 301 356 348 355 422 465 467 404 347 305 336</span></span>
<span id="cb27-14"><a href="index.html#cb27-14" tabindex="-1"></a><span class="do">## 1958 340 318 362 348 363 435 491 505 404 359 310 337</span></span>
<span id="cb27-15"><a href="index.html#cb27-15" tabindex="-1"></a><span class="do">## 1959 360 342 406 396 420 472 548 559 463 407 362 405</span></span>
<span id="cb27-16"><a href="index.html#cb27-16" tabindex="-1"></a><span class="do">## 1960 417 391 419 461 472 535 622 606 508 461 390 432</span></span>
<span id="cb27-17"><a href="index.html#cb27-17" tabindex="-1"></a><span class="co">#is.ts(ap); is.vector(ap)</span></span>
<span id="cb27-18"><a href="index.html#cb27-18" tabindex="-1"></a><span class="co">#attributes(ap)</span></span>
<span id="cb27-19"><a href="index.html#cb27-19" tabindex="-1"></a><span class="fu">class</span>(ap)       <span class="co"># tsクラス</span></span>
<span id="cb27-20"><a href="index.html#cb27-20" tabindex="-1"></a><span class="do">## [1] &quot;ts&quot;</span></span>
<span id="cb27-21"><a href="index.html#cb27-21" tabindex="-1"></a><span class="fu">start</span>(ap); <span class="fu">end</span>(ap); <span class="fu">frequency</span>(ap)</span>
<span id="cb27-22"><a href="index.html#cb27-22" tabindex="-1"></a><span class="do">## [1] 1949    1</span></span>
<span id="cb27-23"><a href="index.html#cb27-23" tabindex="-1"></a><span class="do">## [1] 1960   12</span></span>
<span id="cb27-24"><a href="index.html#cb27-24" tabindex="-1"></a><span class="do">## [1] 12</span></span>
<span id="cb27-25"><a href="index.html#cb27-25" tabindex="-1"></a><span class="fu">plot</span>(ap, <span class="at">ylab =</span> <span class="st">&quot;Passengers (1000&#39;s)&quot;</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-1-1.png" width="75%" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="index.html#cb28-1" tabindex="-1"></a><span class="fu">layout</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb28-2"><a href="index.html#cb28-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">aggregate</span>(ap))     <span class="co"># annual levelに累計, seasonal effectsの除去、trend</span></span>
<span id="cb28-3"><a href="index.html#cb28-3" tabindex="-1"></a><span class="fu">cycle</span>(ap)                   <span class="co"># データ内各アイテムのシーズン抽出</span></span>
<span id="cb28-4"><a href="index.html#cb28-4" tabindex="-1"></a><span class="do">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></span>
<span id="cb28-5"><a href="index.html#cb28-5" tabindex="-1"></a><span class="do">## 1949   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-6"><a href="index.html#cb28-6" tabindex="-1"></a><span class="do">## 1950   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-7"><a href="index.html#cb28-7" tabindex="-1"></a><span class="do">## 1951   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-8"><a href="index.html#cb28-8" tabindex="-1"></a><span class="do">## 1952   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-9"><a href="index.html#cb28-9" tabindex="-1"></a><span class="do">## 1953   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-10"><a href="index.html#cb28-10" tabindex="-1"></a><span class="do">## 1954   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-11"><a href="index.html#cb28-11" tabindex="-1"></a><span class="do">## 1955   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-12"><a href="index.html#cb28-12" tabindex="-1"></a><span class="do">## 1956   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-13"><a href="index.html#cb28-13" tabindex="-1"></a><span class="do">## 1957   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-14"><a href="index.html#cb28-14" tabindex="-1"></a><span class="do">## 1958   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-15"><a href="index.html#cb28-15" tabindex="-1"></a><span class="do">## 1959   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-16"><a href="index.html#cb28-16" tabindex="-1"></a><span class="do">## 1960   1   2   3   4   5   6   7   8   9  10  11  12</span></span>
<span id="cb28-17"><a href="index.html#cb28-17" tabindex="-1"></a><span class="fu">boxplot</span>(ap <span class="sc">~</span> <span class="fu">cycle</span>(ap))     <span class="co"># seasonal effects</span></span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-1-2.png" width="75%" /></p>
<div id="トレンド抽出-平滑化smoothing" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> トレンド抽出, 平滑化(smoothing)<a href="index.html#トレンド抽出-平滑化smoothing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>対称移動平均法(centered moving average)</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="index.html#cb29-1" tabindex="-1"></a><span class="co"># filter()関数の使用</span></span>
<span id="cb29-2"><a href="index.html#cb29-2" tabindex="-1"></a>f12 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">24</span>, <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">/</span><span class="dv">12</span>, <span class="dv">11</span>), <span class="dv">1</span><span class="sc">/</span><span class="dv">24</span>)</span>
<span id="cb29-3"><a href="index.html#cb29-3" tabindex="-1"></a>f12</span>
<span id="cb29-4"><a href="index.html#cb29-4" tabindex="-1"></a><span class="do">##  [1] 0.04166667 0.08333333 0.08333333 0.08333333 0.08333333 0.08333333</span></span>
<span id="cb29-5"><a href="index.html#cb29-5" tabindex="-1"></a><span class="do">##  [7] 0.08333333 0.08333333 0.08333333 0.08333333 0.08333333 0.08333333</span></span>
<span id="cb29-6"><a href="index.html#cb29-6" tabindex="-1"></a><span class="do">## [13] 0.04166667</span></span>
<span id="cb29-7"><a href="index.html#cb29-7" tabindex="-1"></a></span>
<span id="cb29-8"><a href="index.html#cb29-8" tabindex="-1"></a>ap_m <span class="ot">&lt;-</span> stats<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">as.vector</span>(ap), f12, <span class="at">sides =</span> <span class="dv">2</span>)    <span class="co"># vectorとして入力 --&gt; 年情報が欠落</span></span>
<span id="cb29-9"><a href="index.html#cb29-9" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">cbind</span>(<span class="fu">as.vector</span>(ap), ap_m))        <span class="co"># --&gt; 年情報が欠落</span></span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-2-1.png" width="75%" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="index.html#cb30-1" tabindex="-1"></a></span>
<span id="cb30-2"><a href="index.html#cb30-2" tabindex="-1"></a><span class="co">#ap_m2 &lt;- filter(ap, f12, sides = 2)    # tsとして入力</span></span>
<span id="cb30-3"><a href="index.html#cb30-3" tabindex="-1"></a><span class="co">#plot(cbind(ap, ap_m2))</span></span>
<span id="cb30-4"><a href="index.html#cb30-4" tabindex="-1"></a></span>
<span id="cb30-5"><a href="index.html#cb30-5" tabindex="-1"></a><span class="co">#または</span></span>
<span id="cb30-6"><a href="index.html#cb30-6" tabindex="-1"></a>ap_m <span class="ot">&lt;-</span> <span class="fu">ts</span>(ap_m, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1949</span>,<span class="dv">1</span>), <span class="at">frequency =</span> <span class="dv">12</span>)     <span class="co"># &lt;-- 年情報を戻す</span></span>
<span id="cb30-7"><a href="index.html#cb30-7" tabindex="-1"></a><span class="co">#plot(cbind(ap, ap_m))</span></span>
<span id="cb30-8"><a href="index.html#cb30-8" tabindex="-1"></a></span>
<span id="cb30-9"><a href="index.html#cb30-9" tabindex="-1"></a><span class="co">#grid()</span></span>
<span id="cb30-10"><a href="index.html#cb30-10" tabindex="-1"></a><span class="co">#lines(1:length(ap_m), ap_m, col=&quot;blue&quot;)</span></span>
<span id="cb30-11"><a href="index.html#cb30-11" tabindex="-1"></a></span>
<span id="cb30-12"><a href="index.html#cb30-12" tabindex="-1"></a><span class="co"># トレンド除去済データ</span></span>
<span id="cb30-13"><a href="index.html#cb30-13" tabindex="-1"></a>ap_s <span class="ot">&lt;-</span> ap <span class="sc">-</span> ap_m       <span class="co"># 上のts()を使った式によるap_mの生成が必要</span></span>
<span id="cb30-14"><a href="index.html#cb30-14" tabindex="-1"></a><span class="fu">plot</span>(ap_s)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-2-2.png" width="75%" /></p>
</div>
<div id="時系列の分解" class="section level3 hasAnchor" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> 時系列の分解<a href="index.html#時系列の分解" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="古典的方法" class="section level4 hasAnchor" number="1.5.2.1">
<h4><span class="header-section-number">1.5.2.1</span> “古典的”方法<a href="index.html#古典的方法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>- decompose, &quot;古典的&quot;分解モデル (Rのデフォルト)
- The function first determines the trend component using a moving average 
(if filter is NULL, a symmetric window with equal weights is used), and 
removes it from the time series. Then, the seasonal figure is computed by averaging, 
for each time unit, over all periods. The seasonal figure is then centered. 
Finally, the error component is determined by removing trend and seasonal figure 
(recycled as needed) from the original time series.</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="index.html#cb32-1" tabindex="-1"></a><span class="fu">decompose</span>(ap)</span>
<span id="cb32-2"><a href="index.html#cb32-2" tabindex="-1"></a><span class="do">## $x</span></span>
<span id="cb32-3"><a href="index.html#cb32-3" tabindex="-1"></a><span class="do">##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</span></span>
<span id="cb32-4"><a href="index.html#cb32-4" tabindex="-1"></a><span class="do">## 1949 112 118 132 129 121 135 148 148 136 119 104 118</span></span>
<span id="cb32-5"><a href="index.html#cb32-5" tabindex="-1"></a><span class="do">## 1950 115 126 141 135 125 149 170 170 158 133 114 140</span></span>
<span id="cb32-6"><a href="index.html#cb32-6" tabindex="-1"></a><span class="do">## 1951 145 150 178 163 172 178 199 199 184 162 146 166</span></span>
<span id="cb32-7"><a href="index.html#cb32-7" tabindex="-1"></a><span class="do">## 1952 171 180 193 181 183 218 230 242 209 191 172 194</span></span>
<span id="cb32-8"><a href="index.html#cb32-8" tabindex="-1"></a><span class="do">## 1953 196 196 236 235 229 243 264 272 237 211 180 201</span></span>
<span id="cb32-9"><a href="index.html#cb32-9" tabindex="-1"></a><span class="do">## 1954 204 188 235 227 234 264 302 293 259 229 203 229</span></span>
<span id="cb32-10"><a href="index.html#cb32-10" tabindex="-1"></a><span class="do">## 1955 242 233 267 269 270 315 364 347 312 274 237 278</span></span>
<span id="cb32-11"><a href="index.html#cb32-11" tabindex="-1"></a><span class="do">## 1956 284 277 317 313 318 374 413 405 355 306 271 306</span></span>
<span id="cb32-12"><a href="index.html#cb32-12" tabindex="-1"></a><span class="do">## 1957 315 301 356 348 355 422 465 467 404 347 305 336</span></span>
<span id="cb32-13"><a href="index.html#cb32-13" tabindex="-1"></a><span class="do">## 1958 340 318 362 348 363 435 491 505 404 359 310 337</span></span>
<span id="cb32-14"><a href="index.html#cb32-14" tabindex="-1"></a><span class="do">## 1959 360 342 406 396 420 472 548 559 463 407 362 405</span></span>
<span id="cb32-15"><a href="index.html#cb32-15" tabindex="-1"></a><span class="do">## 1960 417 391 419 461 472 535 622 606 508 461 390 432</span></span>
<span id="cb32-16"><a href="index.html#cb32-16" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb32-17"><a href="index.html#cb32-17" tabindex="-1"></a><span class="do">## $seasonal</span></span>
<span id="cb32-18"><a href="index.html#cb32-18" tabindex="-1"></a><span class="do">##             Jan        Feb        Mar        Apr        May        Jun</span></span>
<span id="cb32-19"><a href="index.html#cb32-19" tabindex="-1"></a><span class="do">## 1949 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-20"><a href="index.html#cb32-20" tabindex="-1"></a><span class="do">## 1950 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-21"><a href="index.html#cb32-21" tabindex="-1"></a><span class="do">## 1951 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-22"><a href="index.html#cb32-22" tabindex="-1"></a><span class="do">## 1952 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-23"><a href="index.html#cb32-23" tabindex="-1"></a><span class="do">## 1953 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-24"><a href="index.html#cb32-24" tabindex="-1"></a><span class="do">## 1954 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-25"><a href="index.html#cb32-25" tabindex="-1"></a><span class="do">## 1955 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-26"><a href="index.html#cb32-26" tabindex="-1"></a><span class="do">## 1956 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-27"><a href="index.html#cb32-27" tabindex="-1"></a><span class="do">## 1957 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-28"><a href="index.html#cb32-28" tabindex="-1"></a><span class="do">## 1958 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-29"><a href="index.html#cb32-29" tabindex="-1"></a><span class="do">## 1959 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-30"><a href="index.html#cb32-30" tabindex="-1"></a><span class="do">## 1960 -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-31"><a href="index.html#cb32-31" tabindex="-1"></a><span class="do">##             Jul        Aug        Sep        Oct        Nov        Dec</span></span>
<span id="cb32-32"><a href="index.html#cb32-32" tabindex="-1"></a><span class="do">## 1949  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-33"><a href="index.html#cb32-33" tabindex="-1"></a><span class="do">## 1950  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-34"><a href="index.html#cb32-34" tabindex="-1"></a><span class="do">## 1951  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-35"><a href="index.html#cb32-35" tabindex="-1"></a><span class="do">## 1952  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-36"><a href="index.html#cb32-36" tabindex="-1"></a><span class="do">## 1953  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-37"><a href="index.html#cb32-37" tabindex="-1"></a><span class="do">## 1954  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-38"><a href="index.html#cb32-38" tabindex="-1"></a><span class="do">## 1955  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-39"><a href="index.html#cb32-39" tabindex="-1"></a><span class="do">## 1956  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-40"><a href="index.html#cb32-40" tabindex="-1"></a><span class="do">## 1957  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-41"><a href="index.html#cb32-41" tabindex="-1"></a><span class="do">## 1958  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-42"><a href="index.html#cb32-42" tabindex="-1"></a><span class="do">## 1959  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-43"><a href="index.html#cb32-43" tabindex="-1"></a><span class="do">## 1960  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-44"><a href="index.html#cb32-44" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb32-45"><a href="index.html#cb32-45" tabindex="-1"></a><span class="do">## $trend</span></span>
<span id="cb32-46"><a href="index.html#cb32-46" tabindex="-1"></a><span class="do">##           Jan      Feb      Mar      Apr      May      Jun      Jul      Aug</span></span>
<span id="cb32-47"><a href="index.html#cb32-47" tabindex="-1"></a><span class="do">## 1949       NA       NA       NA       NA       NA       NA 126.7917 127.2500</span></span>
<span id="cb32-48"><a href="index.html#cb32-48" tabindex="-1"></a><span class="do">## 1950 131.2500 133.0833 134.9167 136.4167 137.4167 138.7500 140.9167 143.1667</span></span>
<span id="cb32-49"><a href="index.html#cb32-49" tabindex="-1"></a><span class="do">## 1951 157.1250 159.5417 161.8333 164.1250 166.6667 169.0833 171.2500 173.5833</span></span>
<span id="cb32-50"><a href="index.html#cb32-50" tabindex="-1"></a><span class="do">## 1952 183.1250 186.2083 189.0417 191.2917 193.5833 195.8333 198.0417 199.7500</span></span>
<span id="cb32-51"><a href="index.html#cb32-51" tabindex="-1"></a><span class="do">## 1953 215.8333 218.5000 220.9167 222.9167 224.0833 224.7083 225.3333 225.3333</span></span>
<span id="cb32-52"><a href="index.html#cb32-52" tabindex="-1"></a><span class="do">## 1954 228.0000 230.4583 232.2500 233.9167 235.6250 237.7500 240.5000 243.9583</span></span>
<span id="cb32-53"><a href="index.html#cb32-53" tabindex="-1"></a><span class="do">## 1955 261.8333 266.6667 271.1250 275.2083 278.5000 281.9583 285.7500 289.3333</span></span>
<span id="cb32-54"><a href="index.html#cb32-54" tabindex="-1"></a><span class="do">## 1956 309.9583 314.4167 318.6250 321.7500 324.5000 327.0833 329.5417 331.8333</span></span>
<span id="cb32-55"><a href="index.html#cb32-55" tabindex="-1"></a><span class="do">## 1957 348.2500 353.0000 357.6250 361.3750 364.5000 367.1667 369.4583 371.2083</span></span>
<span id="cb32-56"><a href="index.html#cb32-56" tabindex="-1"></a><span class="do">## 1958 375.2500 377.9167 379.5000 380.0000 380.7083 380.9583 381.8333 383.6667</span></span>
<span id="cb32-57"><a href="index.html#cb32-57" tabindex="-1"></a><span class="do">## 1959 402.5417 407.1667 411.8750 416.3333 420.5000 425.5000 430.7083 435.1250</span></span>
<span id="cb32-58"><a href="index.html#cb32-58" tabindex="-1"></a><span class="do">## 1960 456.3333 461.3750 465.2083 469.3333 472.7500 475.0417       NA       NA</span></span>
<span id="cb32-59"><a href="index.html#cb32-59" tabindex="-1"></a><span class="do">##           Sep      Oct      Nov      Dec</span></span>
<span id="cb32-60"><a href="index.html#cb32-60" tabindex="-1"></a><span class="do">## 1949 127.9583 128.5833 129.0000 129.7500</span></span>
<span id="cb32-61"><a href="index.html#cb32-61" tabindex="-1"></a><span class="do">## 1950 145.7083 148.4167 151.5417 154.7083</span></span>
<span id="cb32-62"><a href="index.html#cb32-62" tabindex="-1"></a><span class="do">## 1951 175.4583 176.8333 178.0417 180.1667</span></span>
<span id="cb32-63"><a href="index.html#cb32-63" tabindex="-1"></a><span class="do">## 1952 202.2083 206.2500 210.4167 213.3750</span></span>
<span id="cb32-64"><a href="index.html#cb32-64" tabindex="-1"></a><span class="do">## 1953 224.9583 224.5833 224.4583 225.5417</span></span>
<span id="cb32-65"><a href="index.html#cb32-65" tabindex="-1"></a><span class="do">## 1954 247.1667 250.2500 253.5000 257.1250</span></span>
<span id="cb32-66"><a href="index.html#cb32-66" tabindex="-1"></a><span class="do">## 1955 293.2500 297.1667 301.0000 305.4583</span></span>
<span id="cb32-67"><a href="index.html#cb32-67" tabindex="-1"></a><span class="do">## 1956 334.4583 337.5417 340.5417 344.0833</span></span>
<span id="cb32-68"><a href="index.html#cb32-68" tabindex="-1"></a><span class="do">## 1957 372.1667 372.4167 372.7500 373.6250</span></span>
<span id="cb32-69"><a href="index.html#cb32-69" tabindex="-1"></a><span class="do">## 1958 386.5000 390.3333 394.7083 398.6250</span></span>
<span id="cb32-70"><a href="index.html#cb32-70" tabindex="-1"></a><span class="do">## 1959 437.7083 440.9583 445.8333 450.6250</span></span>
<span id="cb32-71"><a href="index.html#cb32-71" tabindex="-1"></a><span class="do">## 1960       NA       NA       NA       NA</span></span>
<span id="cb32-72"><a href="index.html#cb32-72" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb32-73"><a href="index.html#cb32-73" tabindex="-1"></a><span class="do">## $random</span></span>
<span id="cb32-74"><a href="index.html#cb32-74" tabindex="-1"></a><span class="do">##              Jan         Feb         Mar         Apr         May         Jun</span></span>
<span id="cb32-75"><a href="index.html#cb32-75" tabindex="-1"></a><span class="do">## 1949          NA          NA          NA          NA          NA          NA</span></span>
<span id="cb32-76"><a href="index.html#cb32-76" tabindex="-1"></a><span class="do">## 1950   8.4987374  29.1047980   8.3244949   6.6199495  -7.9103535 -25.1527778</span></span>
<span id="cb32-77"><a href="index.html#cb32-77" tabindex="-1"></a><span class="do">## 1951  12.6237374  26.6464646  18.4078283   6.9116162   9.8396465 -26.4861111</span></span>
<span id="cb32-78"><a href="index.html#cb32-78" tabindex="-1"></a><span class="do">## 1952  12.6237374  29.9797980   6.1994949  -2.2550505  -6.0770202 -13.2361111</span></span>
<span id="cb32-79"><a href="index.html#cb32-79" tabindex="-1"></a><span class="do">## 1953   4.9154040  13.6881313  17.3244949  20.1199495   9.4229798 -17.1111111</span></span>
<span id="cb32-80"><a href="index.html#cb32-80" tabindex="-1"></a><span class="do">## 1954   0.7487374  -6.2702020   4.9911616   1.1199495   2.8813131  -9.1527778</span></span>
<span id="cb32-81"><a href="index.html#cb32-81" tabindex="-1"></a><span class="do">## 1955   4.9154040   2.5214646  -1.8838384   1.8282828  -3.9936869  -2.3611111</span></span>
<span id="cb32-82"><a href="index.html#cb32-82" tabindex="-1"></a><span class="do">## 1956  -1.2095960  -1.2285354   0.6161616  -0.7133838  -1.9936869  11.5138889</span></span>
<span id="cb32-83"><a href="index.html#cb32-83" tabindex="-1"></a><span class="do">## 1957  -8.5012626 -15.8118687   0.6161616  -5.3383838  -4.9936869  19.4305556</span></span>
<span id="cb32-84"><a href="index.html#cb32-84" tabindex="-1"></a><span class="do">## 1958 -10.5012626 -23.7285354 -15.2588384 -23.9633838 -13.2020202  18.6388889</span></span>
<span id="cb32-85"><a href="index.html#cb32-85" tabindex="-1"></a><span class="do">## 1959 -17.7929293 -28.9785354  -3.6338384 -12.2967172   4.0063131  11.0972222</span></span>
<span id="cb32-86"><a href="index.html#cb32-86" tabindex="-1"></a><span class="do">## 1960 -14.5845960 -34.1868687 -43.9671717  -0.2967172   3.7563131  24.5555556</span></span>
<span id="cb32-87"><a href="index.html#cb32-87" tabindex="-1"></a><span class="do">##              Jul         Aug         Sep         Oct         Nov         Dec</span></span>
<span id="cb32-88"><a href="index.html#cb32-88" tabindex="-1"></a><span class="do">## 1949 -42.6224747 -42.0732323  -8.4785354  11.0593434  28.5934343  16.8699495</span></span>
<span id="cb32-89"><a href="index.html#cb32-89" tabindex="-1"></a><span class="do">## 1950 -34.7474747 -35.9898990  -4.2285354   5.2260101  16.0517677  13.9116162</span></span>
<span id="cb32-90"><a href="index.html#cb32-90" tabindex="-1"></a><span class="do">## 1951 -36.0808081 -37.4065657  -7.9785354   5.8093434  21.5517677  14.4532828</span></span>
<span id="cb32-91"><a href="index.html#cb32-91" tabindex="-1"></a><span class="do">## 1952 -31.8724747 -20.5732323  -9.7285354   5.3926768  15.1767677   9.2449495</span></span>
<span id="cb32-92"><a href="index.html#cb32-92" tabindex="-1"></a><span class="do">## 1953 -25.1641414 -16.1565657  -4.4785354   7.0593434   9.1351010   4.0782828</span></span>
<span id="cb32-93"><a href="index.html#cb32-93" tabindex="-1"></a><span class="do">## 1954  -2.3308081 -13.7815657  -4.6868687  -0.6073232   3.0934343   0.4949495</span></span>
<span id="cb32-94"><a href="index.html#cb32-94" tabindex="-1"></a><span class="do">## 1955  14.4191919  -5.1565657   2.2297980  -2.5239899 -10.4065657   1.1616162</span></span>
<span id="cb32-95"><a href="index.html#cb32-95" tabindex="-1"></a><span class="do">## 1956  19.6275253  10.3434343   4.0214646 -10.8989899 -15.9482323  -9.4633838</span></span>
<span id="cb32-96"><a href="index.html#cb32-96" tabindex="-1"></a><span class="do">## 1957  31.7108586  32.9684343  15.3131313  -4.7739899 -14.1565657  -9.0050505</span></span>
<span id="cb32-97"><a href="index.html#cb32-97" tabindex="-1"></a><span class="do">## 1958  45.3358586  58.5101010   0.9797980 -10.6906566 -31.1148990 -33.0050505</span></span>
<span id="cb32-98"><a href="index.html#cb32-98" tabindex="-1"></a><span class="do">## 1959  53.4608586  61.0517677   8.7714646 -13.3156566 -30.2398990 -17.0050505</span></span>
<span id="cb32-99"><a href="index.html#cb32-99" tabindex="-1"></a><span class="do">## 1960          NA          NA          NA          NA          NA          NA</span></span>
<span id="cb32-100"><a href="index.html#cb32-100" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb32-101"><a href="index.html#cb32-101" tabindex="-1"></a><span class="do">## $figure</span></span>
<span id="cb32-102"><a href="index.html#cb32-102" tabindex="-1"></a><span class="do">##  [1] -24.748737 -36.188131  -2.241162  -8.036616  -4.506313  35.402778</span></span>
<span id="cb32-103"><a href="index.html#cb32-103" tabindex="-1"></a><span class="do">##  [7]  63.830808  62.823232  16.520202 -20.642677 -53.593434 -28.619949</span></span>
<span id="cb32-104"><a href="index.html#cb32-104" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb32-105"><a href="index.html#cb32-105" tabindex="-1"></a><span class="do">## $type</span></span>
<span id="cb32-106"><a href="index.html#cb32-106" tabindex="-1"></a><span class="do">## [1] &quot;additive&quot;</span></span>
<span id="cb32-107"><a href="index.html#cb32-107" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb32-108"><a href="index.html#cb32-108" tabindex="-1"></a><span class="do">## attr(,&quot;class&quot;)</span></span>
<span id="cb32-109"><a href="index.html#cb32-109" tabindex="-1"></a><span class="do">## [1] &quot;decomposed.ts&quot;</span></span>
<span id="cb32-110"><a href="index.html#cb32-110" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">decompose</span>(ap))</span>
<span id="cb32-111"><a href="index.html#cb32-111" tabindex="-1"></a></span>
<span id="cb32-112"><a href="index.html#cb32-112" tabindex="-1"></a>ap_decom <span class="ot">&lt;-</span> <span class="fu">decompose</span>(ap)       <span class="co"># additive</span></span>
<span id="cb32-113"><a href="index.html#cb32-113" tabindex="-1"></a><span class="co">#ap_decom &lt;- decompose(ap, type = &quot;mult&quot;)   # multiplicative</span></span>
<span id="cb32-114"><a href="index.html#cb32-114" tabindex="-1"></a><span class="fu">plot</span>(ap_decom)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-4-1.png" width="75%" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="index.html#cb33-1" tabindex="-1"></a>Trend <span class="ot">&lt;-</span> ap_decom<span class="sc">$</span>trend</span>
<span id="cb33-2"><a href="index.html#cb33-2" tabindex="-1"></a>Seasonal <span class="ot">&lt;-</span> ap_decom<span class="sc">$</span>seasonal</span>
<span id="cb33-3"><a href="index.html#cb33-3" tabindex="-1"></a><span class="fu">ts.plot</span>(<span class="fu">cbind</span>(Trend, Trend <span class="sc">*</span> Seasonal), <span class="at">lty =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>) <span class="co"># トレンド成分 vs トレンド×季節性成分</span></span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-5-1.png" width="75%" /></p>
<p>→ トレンド×季節性成分が圧倒 → 季節性成分にトレンド成分混入!?</p>
<ul>
<li>時系列を対数変換</li>
</ul>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="index.html#cb34-1" tabindex="-1"></a>lnap <span class="ot">&lt;-</span> <span class="fu">log</span>(ap)</span>
<span id="cb34-2"><a href="index.html#cb34-2" tabindex="-1"></a>lnap_decom <span class="ot">&lt;-</span> <span class="fu">decompose</span>(lnap)</span>
<span id="cb34-3"><a href="index.html#cb34-3" tabindex="-1"></a><span class="fu">plot</span>(lnap_decom)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-6-1.png" width="75%" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="index.html#cb35-1" tabindex="-1"></a>Trend <span class="ot">&lt;-</span> lnap_decom<span class="sc">$</span>trend</span>
<span id="cb35-2"><a href="index.html#cb35-2" tabindex="-1"></a>Seasonal <span class="ot">&lt;-</span> lnap_decom<span class="sc">$</span>seasonal</span>
<span id="cb35-3"><a href="index.html#cb35-3" tabindex="-1"></a><span class="fu">ts.plot</span>(<span class="fu">cbind</span>(Trend, Trend <span class="sc">*</span> Seasonal), <span class="at">lty =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-6-2.png" width="75%" /></p>
<p>または, オプション type=“multiplicative”を指定</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="index.html#cb36-1" tabindex="-1"></a>ap_decom_m <span class="ot">&lt;-</span> <span class="fu">decompose</span>(ap, <span class="at">type =</span> <span class="st">&quot;multiplicative&quot;</span>)</span>
<span id="cb36-2"><a href="index.html#cb36-2" tabindex="-1"></a><span class="fu">plot</span>(ap_decom_m)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-7-1.png" width="75%" /></p>
<ul>
<li><p>参考文献: CM (2009), Ch.1</p></li>
<li><p>(自主課題) decomposeと同じように3成分に分解する自作関数を作成せよ</p></li>
</ul>
</div>
<div id="代替的方法" class="section level4 hasAnchor" number="1.5.2.2">
<h4><span class="header-section-number">1.5.2.2</span> 代替的方法<a href="index.html#代替的方法" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<pre><code>- stl(), Seasonal Decomposition of Time Series by Loess
- loess(locally weighted regression)によるsmoothingを行い, 3成分に分解</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="index.html#cb38-1" tabindex="-1"></a><span class="co">#plot(stl(ap, s.window = 13))</span></span>
<span id="cb38-2"><a href="index.html#cb38-2" tabindex="-1"></a><span class="co">#plot(stl(ap, s.window = 5))</span></span>
<span id="cb38-3"><a href="index.html#cb38-3" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">stl</span>(ap, <span class="at">s.window =</span> <span class="st">&quot;per&quot;</span>))</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-8-1.png" width="75%" /></p>
<pre><code>- &quot;timsac&quot;: 統数研開発パッケージ
- H.Akaike, T.Ozaki, M.Ishiguro, Y.Ogata, G.Kitagawa, Y-H.Tamura, E.Arahata, K.Katsura and Y.Tamura (1984) Computer Science Monographs, Timsac-84 Part 1. The Institute of Statistical Mathematics.</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="index.html#cb40-1" tabindex="-1"></a><span class="fu">library</span>(timsac)</span>
<span id="cb40-2"><a href="index.html#cb40-2" tabindex="-1"></a><span class="co"># decomp()</span></span>
<span id="cb40-3"><a href="index.html#cb40-3" tabindex="-1"></a><span class="co"># Decompose a nonstationary time series into several possible components by square-root filter.</span></span>
<span id="cb40-4"><a href="index.html#cb40-4" tabindex="-1"></a><span class="co"># トレンド成分、AR成分、季節変動成分、曜日効果、白色雑音</span></span>
<span id="cb40-5"><a href="index.html#cb40-5" tabindex="-1"></a></span>
<span id="cb40-6"><a href="index.html#cb40-6" tabindex="-1"></a><span class="co"># データセット: Blsallfood</span></span>
<span id="cb40-7"><a href="index.html#cb40-7" tabindex="-1"></a><span class="fu">data</span>(Blsallfood)</span>
<span id="cb40-8"><a href="index.html#cb40-8" tabindex="-1"></a><span class="co"># アメリカの食品産業に従事する労働者の人数を毎月調べた時系列 (合衆国 Bureau of Labor Statistics (BLS) 公表)</span></span>
<span id="cb40-9"><a href="index.html#cb40-9" tabindex="-1"></a><span class="co">#z &lt;- decomp(Blsallfood, trade = TRUE, year = 1973) # year: the first year of the data</span></span>
<span id="cb40-10"><a href="index.html#cb40-10" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">decomp</span>(Blsallfood, <span class="at">year =</span> <span class="dv">1973</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-9-1.png" width="75%" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="index.html#cb41-1" tabindex="-1"></a>z<span class="sc">$</span>aic; z<span class="sc">$</span>lkhd</span>
<span id="cb41-2"><a href="index.html#cb41-2" tabindex="-1"></a><span class="do">## [1] 1204.446</span></span>
<span id="cb41-3"><a href="index.html#cb41-3" tabindex="-1"></a><span class="do">## [1] -581.2231</span></span>
<span id="cb41-4"><a href="index.html#cb41-4" tabindex="-1"></a>z<span class="sc">$</span>sigma2; z<span class="sc">$</span>tau1; z<span class="sc">$</span>tau2; z<span class="sc">$</span>tau3</span>
<span id="cb41-5"><a href="index.html#cb41-5" tabindex="-1"></a><span class="do">## [1] 27.75967</span></span>
<span id="cb41-6"><a href="index.html#cb41-6" tabindex="-1"></a><span class="do">## [1] 0.00516679</span></span>
<span id="cb41-7"><a href="index.html#cb41-7" tabindex="-1"></a><span class="do">## [1] 0.9953483</span></span>
<span id="cb41-8"><a href="index.html#cb41-8" tabindex="-1"></a><span class="do">## [1] 0.0001000029</span></span>
<span id="cb41-9"><a href="index.html#cb41-9" tabindex="-1"></a></span>
<span id="cb41-10"><a href="index.html#cb41-10" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">decomp</span>(Blsallfood, <span class="at">trade =</span> <span class="cn">TRUE</span>, <span class="at">year =</span> <span class="dv">1973</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-9-2.png" width="75%" /></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="index.html#cb42-1" tabindex="-1"></a></span>
<span id="cb42-2"><a href="index.html#cb42-2" tabindex="-1"></a><span class="co">#decomp(as.vector(ap), year = 1949) # OK?</span></span>
<span id="cb42-3"><a href="index.html#cb42-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">decomp</span>(ap, <span class="at">year =</span> <span class="dv">1949</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-9-3.png" width="75%" /></p>
<pre><code>- baysea()
- Decompose a nonstationary time series into several possible components</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="index.html#cb44-1" tabindex="-1"></a><span class="co"># データセット: LaborData</span></span>
<span id="cb44-2"><a href="index.html#cb44-2" tabindex="-1"></a><span class="fu">data</span>(LaborData)</span>
<span id="cb44-3"><a href="index.html#cb44-3" tabindex="-1"></a><span class="co"># Labor force U.S. unemployed 16 years or over (1972-1978) data</span></span>
<span id="cb44-4"><a href="index.html#cb44-4" tabindex="-1"></a><span class="fu">head</span>(LaborData)</span>
<span id="cb44-5"><a href="index.html#cb44-5" tabindex="-1"></a><span class="do">## [1] 5447 5412 5215 4697 4344 5426</span></span>
<span id="cb44-6"><a href="index.html#cb44-6" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">baysea</span>(LaborData, <span class="at">forecast =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-10-1.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-2.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-3.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-4.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-5.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-6.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-7.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-8.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-9.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-10.png" width="75%" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="index.html#cb45-1" tabindex="-1"></a></span>
<span id="cb45-2"><a href="index.html#cb45-2" tabindex="-1"></a><span class="co">#baysea(as.vector(ap), forecast = 12)   # OK?</span></span>
<span id="cb45-3"><a href="index.html#cb45-3" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">baysea</span>(ap, <span class="at">forecast =</span> <span class="dv">12</span>)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-10-11.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-12.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-13.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-14.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-15.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-16.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-17.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-18.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-19.png" width="75%" /><img src="016-decomp_files/figure-html/unnamed-chunk-10-20.png" width="75%" /></p>
</div>
<div id="代替的方法-続き" class="section level4 hasAnchor" number="1.5.2.3">
<h4><span class="header-section-number">1.5.2.3</span> 代替的方法 (続き)<a href="index.html#代替的方法-続き" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li>prophet()</li>
<li><a href="https://facebook.github.io/prophet/docs/quick_start.html#r-api" class="uri">https://facebook.github.io/prophet/docs/quick_start.html#r-api</a></li>
<li><a href="https://cran.r-project.org/web/packages/prophet/prophet.pdf" class="uri">https://cran.r-project.org/web/packages/prophet/prophet.pdf</a></li>
<li>“非線形のトレンドに年次・週次・日次の季節性, さらに 休日効果を加えた加法モデルに基づいて時系列データを予測する手続を実装.
強い季節性があり, 数シーズンの過去データを持つ時系列データに対して良く機能.
欠損値やトレンドのシフトに対して頑強. 通常, 外れ値をうまく処理.”</li>
</ul>
<pre><code>prophet()の主な引数
- growth: &quot;linear&quot;(デフォルト), &quot;logisitc&quot;, &quot;flat&quot;
- changepoints (変化点): 日付ベクトルをユーザー指定 or 潜在的な変化点の自動選択(デフォルト)
- n.changepoints (変化点の数): 25 (デフォルト)
- yearly.seasonality (年次季節性への適合): &quot;auto&quot;(デフォルト), T, F, 生成するFourier項の数
- weekly.seasonality (週次季節性への適合): 同上
- daily.seasonality (週次季節性への適合): 同上
- holidays (休日の指定): なし(デフォルト
- seasonality.mode (季節性の入り方): &quot;additive&quot;(加法的)(デフォルト), &quot;multiplictive&quot;(乗法的)</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="index.html#cb47-1" tabindex="-1"></a><span class="co">#install.packages(&quot;prophet&quot;)</span></span>
<span id="cb47-2"><a href="index.html#cb47-2" tabindex="-1"></a><span class="fu">library</span>(prophet)</span>
<span id="cb47-3"><a href="index.html#cb47-3" tabindex="-1"></a><span class="fu">library</span>(zoo) <span class="co"># index, yearmon</span></span>
<span id="cb47-4"><a href="index.html#cb47-4" tabindex="-1"></a></span>
<span id="cb47-5"><a href="index.html#cb47-5" tabindex="-1"></a><span class="co"># 以下, 生データのまま使用 (対数変換せず)</span></span>
<span id="cb47-6"><a href="index.html#cb47-6" tabindex="-1"></a><span class="co"># 年月の取り出し</span></span>
<span id="cb47-7"><a href="index.html#cb47-7" tabindex="-1"></a>tt <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">yearmon</span>(<span class="fu">index</span>(ap)))</span></code></pre></div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="index.html#cb48-1" tabindex="-1"></a><span class="co"># prophetモデルの生成</span></span>
<span id="cb48-2"><a href="index.html#cb48-2" tabindex="-1"></a>ap_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">ds =</span> tt, <span class="at">y =</span> ap)</span>
<span id="cb48-3"><a href="index.html#cb48-3" tabindex="-1"></a>ap_ppht <span class="ot">&lt;-</span> <span class="fu">prophet</span>(ap_df)</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="index.html#cb49-1" tabindex="-1"></a><span class="co"># 予測年月の生成</span></span>
<span id="cb49-2"><a href="index.html#cb49-2" tabindex="-1"></a>dates_ft <span class="ot">&lt;-</span> <span class="fu">make_future_dataframe</span>(ap_ppht, <span class="at">periods =</span> <span class="dv">12</span>, <span class="at">freq =</span> <span class="st">&quot;month&quot;</span>)</span>
<span id="cb49-3"><a href="index.html#cb49-3" tabindex="-1"></a><span class="fu">tail</span>(dates_ft)</span>
<span id="cb49-4"><a href="index.html#cb49-4" tabindex="-1"></a><span class="do">##             ds</span></span>
<span id="cb49-5"><a href="index.html#cb49-5" tabindex="-1"></a><span class="do">## 151 1961-07-01</span></span>
<span id="cb49-6"><a href="index.html#cb49-6" tabindex="-1"></a><span class="do">## 152 1961-08-01</span></span>
<span id="cb49-7"><a href="index.html#cb49-7" tabindex="-1"></a><span class="do">## 153 1961-09-01</span></span>
<span id="cb49-8"><a href="index.html#cb49-8" tabindex="-1"></a><span class="do">## 154 1961-10-01</span></span>
<span id="cb49-9"><a href="index.html#cb49-9" tabindex="-1"></a><span class="do">## 155 1961-11-01</span></span>
<span id="cb49-10"><a href="index.html#cb49-10" tabindex="-1"></a><span class="do">## 156 1961-12-01</span></span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="index.html#cb50-1" tabindex="-1"></a><span class="co"># 予測値の生成</span></span>
<span id="cb50-2"><a href="index.html#cb50-2" tabindex="-1"></a>ap_forecast <span class="ot">&lt;-</span> <span class="fu">predict</span>(ap_ppht, dates_ft)</span>
<span id="cb50-3"><a href="index.html#cb50-3" tabindex="-1"></a><span class="fu">tail</span>(ap_forecast[<span class="fu">c</span>(<span class="st">&#39;ds&#39;</span>, <span class="st">&#39;yhat&#39;</span>, <span class="st">&#39;yhat_lower&#39;</span>, <span class="st">&#39;yhat_upper&#39;</span>)])</span>
<span id="cb50-4"><a href="index.html#cb50-4" tabindex="-1"></a><span class="do">##             ds     yhat yhat_lower yhat_upper</span></span>
<span id="cb50-5"><a href="index.html#cb50-5" tabindex="-1"></a><span class="do">## 151 1961-07-01 576.8046   549.0403   605.3782</span></span>
<span id="cb50-6"><a href="index.html#cb50-6" tabindex="-1"></a><span class="do">## 152 1961-08-01 577.2261   549.4752   606.1975</span></span>
<span id="cb50-7"><a href="index.html#cb50-7" tabindex="-1"></a><span class="do">## 153 1961-09-01 528.6678   501.5016   557.8755</span></span>
<span id="cb50-8"><a href="index.html#cb50-8" tabindex="-1"></a><span class="do">## 154 1961-10-01 493.5023   465.1356   523.0724</span></span>
<span id="cb50-9"><a href="index.html#cb50-9" tabindex="-1"></a><span class="do">## 155 1961-11-01 459.6479   429.6407   488.7700</span></span>
<span id="cb50-10"><a href="index.html#cb50-10" tabindex="-1"></a><span class="do">## 156 1961-12-01 489.0093   458.0174   515.9366</span></span>
<span id="cb50-11"><a href="index.html#cb50-11" tabindex="-1"></a><span class="fu">str</span>(ap_forecast)</span>
<span id="cb50-12"><a href="index.html#cb50-12" tabindex="-1"></a><span class="do">## &#39;data.frame&#39;:    156 obs. of  16 variables:</span></span>
<span id="cb50-13"><a href="index.html#cb50-13" tabindex="-1"></a><span class="do">##  $ ds                        : POSIXct, format: &quot;1949-01-01&quot; &quot;1949-02-01&quot; ...</span></span>
<span id="cb50-14"><a href="index.html#cb50-14" tabindex="-1"></a><span class="do">##  $ trend                     : num  107 109 111 114 116 ...</span></span>
<span id="cb50-15"><a href="index.html#cb50-15" tabindex="-1"></a><span class="do">##  $ additive_terms            : num  -21.433 -30.103 -0.467 -4.937 -3.629 ...</span></span>
<span id="cb50-16"><a href="index.html#cb50-16" tabindex="-1"></a><span class="do">##  $ additive_terms_lower      : num  -21.433 -30.103 -0.467 -4.937 -3.629 ...</span></span>
<span id="cb50-17"><a href="index.html#cb50-17" tabindex="-1"></a><span class="do">##  $ additive_terms_upper      : num  -21.433 -30.103 -0.467 -4.937 -3.629 ...</span></span>
<span id="cb50-18"><a href="index.html#cb50-18" tabindex="-1"></a><span class="do">##  $ yearly                    : num  -21.433 -30.103 -0.467 -4.937 -3.629 ...</span></span>
<span id="cb50-19"><a href="index.html#cb50-19" tabindex="-1"></a><span class="do">##  $ yearly_lower              : num  -21.433 -30.103 -0.467 -4.937 -3.629 ...</span></span>
<span id="cb50-20"><a href="index.html#cb50-20" tabindex="-1"></a><span class="do">##  $ yearly_upper              : num  -21.433 -30.103 -0.467 -4.937 -3.629 ...</span></span>
<span id="cb50-21"><a href="index.html#cb50-21" tabindex="-1"></a><span class="do">##  $ multiplicative_terms      : num  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span id="cb50-22"><a href="index.html#cb50-22" tabindex="-1"></a><span class="do">##  $ multiplicative_terms_lower: num  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span id="cb50-23"><a href="index.html#cb50-23" tabindex="-1"></a><span class="do">##  $ multiplicative_terms_upper: num  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span id="cb50-24"><a href="index.html#cb50-24" tabindex="-1"></a><span class="do">##  $ yhat_lower                : num  56.9 49.3 83 78.5 82.2 ...</span></span>
<span id="cb50-25"><a href="index.html#cb50-25" tabindex="-1"></a><span class="do">##  $ yhat_upper                : num  116 108 141 136 139 ...</span></span>
<span id="cb50-26"><a href="index.html#cb50-26" tabindex="-1"></a><span class="do">##  $ trend_lower               : num  107 109 111 114 116 ...</span></span>
<span id="cb50-27"><a href="index.html#cb50-27" tabindex="-1"></a><span class="do">##  $ trend_upper               : num  107 109 111 114 116 ...</span></span>
<span id="cb50-28"><a href="index.html#cb50-28" tabindex="-1"></a><span class="do">##  $ yhat                      : num  85.9 79.4 110.9 108.6 112 ...</span></span>
<span id="cb50-29"><a href="index.html#cb50-29" tabindex="-1"></a></span>
<span id="cb50-30"><a href="index.html#cb50-30" tabindex="-1"></a><span class="fu">plot</span>(ap_ppht, ap_forecast)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-14-1.png" width="75%" /></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="index.html#cb51-1" tabindex="-1"></a><span class="co"># prophetによる予測の各成分のプロット</span></span>
<span id="cb51-2"><a href="index.html#cb51-2" tabindex="-1"></a><span class="fu">prophet_plot_components</span>(ap_ppht, ap_forecast)</span></code></pre></div>
<p><img src="016-decomp_files/figure-html/unnamed-chunk-15-1.png" width="75%" /></p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="定常性と自己相関関数.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
